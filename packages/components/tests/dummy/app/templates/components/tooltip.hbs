{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "Tooltip Component"}}

<Shw::Text::H1>Tooltip</Shw::Text::H1>

<section data-test-percy>
  <Shw::Text::H2>TooltipButton</Shw::Text::H2>

  <Shw::Text::H3>Content</Shw::Text::H3>

  <Shw::Text::H4>On its own</Shw::Text::H4>
  <Shw::Flex as |SF|>
    <SF.Item @label="With a FlightIcon as content">
      <Hds::TooltipButton @text="Here is more information" aria-label="Information">
        <FlightIcon @name="info" />
      </Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="With an HTML time element as content">
      <Hds::TooltipButton @text="2023-03-30T19:18:01.684Z">
        <time datetime="2023-03-30T19:18:01.684Z">Apr 5, 2023</time>
      </Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="With really long content in tooltip">
      <Hds::TooltipButton
        aria-label="Information"
        @text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
      >
        <Hds::Badge @icon="activity" @text="Lorem ipsum" />
      </Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="With a really long string">
      <Hds::TooltipButton
        aria-label="Information"
        @text="Loremipsumdolorsitametconsecteturadipiscingelitseddoeiusmodtempor!"
      >
        <Hds::Badge @icon="activity" @text="Lorem ipsum" />
      </Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H4>Used next to text</Shw::Text::H4>
  <p>
    <span class="hds-typography-display-300">Lorem ipsum dolor sit amet consectetur</span>
    <Hds::TooltipButton @text="Here is more info" aria-label="Information"><FlightIcon
        @name="info"
      /></Hds::TooltipButton>
  </p>

  <p class="hds-typography-body-300">
    Lorem ipsum dolor sit amet consectetur
    <Hds::TooltipButton @text="Here is more info"><FlightIcon @name="info" /></Hds::TooltipButton>
    adipisicing elit. Doloremque blanditiis sapiente iste beatae voluptates voluptatum.
  </p>

  <Shw::Text::H4>Used within various non-interactive components</Shw::Text::H4>

  <Shw::Flex @direction="column" as |SF|>
    <SF.Item @label="Used within a tab panel">
      {{! Using within a `T.Tab` would result with a button nested inside a button and won't function. }}
      <Hds::Tabs as |T|>
        <T.Tab>One</T.Tab>
        <T.Tab>Two</T.Tab>
        <T.Tab>Three</T.Tab>
        <T.Panel>
          <p class="hds-typography-body-300">
            Content 1
            <Hds::TooltipButton @text="Here is more info" aria-label="Information"><FlightIcon
                @name="info"
              /></Hds::TooltipButton>
          </p>
        </T.Panel>
        <T.Panel><p class="hds-typography-body-300">
            Content 2
            <Hds::TooltipButton @text="Here is more info" aria-label="Information"><FlightIcon
                @name="info"
              /></Hds::TooltipButton>
          </p></T.Panel>
        <T.Panel><p class="hds-typography-body-300">
            Content 3
            <Hds::TooltipButton @text="Here is more info" aria-label="Information"><FlightIcon
                @name="info"
              /></Hds::TooltipButton>
          </p></T.Panel>
      </Hds::Tabs>
    </SF.Item>
    <SF.Item @label="Used within an alert">
      <Hds::Alert @type="inline" @color="warning" @onDismiss={{this.noop}} as |A|>
        <A.Title>Warning</A.Title>
        <A.Description>
          Caution is advised.
          <Hds::TooltipButton @text="Be careful with this" aria-label="Information"><FlightIcon
              @name="info"
            /></Hds::TooltipButton>
        </A.Description>
      </Hds::Alert>
    </SF.Item>
    <SF.Item @label="Used within a table heading">
      <Hds::Table>
        <:head as |H|>
          <H.Tr>
            <H.Th>Lorem</H.Th>
            <H.Th>Ipsum
              <Hds::TooltipButton @text="Here is more info" aria-label="Information"><FlightIcon
                  @name="info"
                /></Hds::TooltipButton></H.Th>
            <H.Th>Dolor</H.Th>
            <H.Th>Sit amet</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>Display</Shw::Text::H3>

  <Shw::Flex as |SF|>
    <SF.Item @label="With isInline=false">
      <p class="hds-typography-body-300">
        Lorem ipsum dolor sit amet consectetur
        <Hds::TooltipButton @text="Here is more info" @isInline={{false}} aria-label="Information">
          <FlightIcon @name="info" />
        </Hds::TooltipButton>
        adipisicing elit. Doloremque blanditiis sapiente iste beatae voluptates voluptatum.
      </p>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>Inheritance</Shw::Text::H3>

  <Shw::Text::Body>HDS classes</Shw::Text::Body>

  <Shw::Flex {{style gap="2rem"}} as |SF|>
    <SF.Item @label="Applied to parent">
      <div class="hds-typography-display-400 hds-foreground-warning-on-surface hds-surface-warning">
        <Hds::TooltipButton @text="Here is more info" @isInline={{false}} aria-label="Information">
          Lorem ipsum dolor
        </Hds::TooltipButton>
      </div>
    </SF.Item>
    <SF.Item @label="Applied to the button">
      <Hds::TooltipButton
        class="hds-typography-display-400 hds-foreground-warning-on-surface hds-surface-warning"
        @text="Here is more info"
      >
        Lorem ipsum dolor
      </Hds::TooltipButton>
    </SF.Item>
    <SF.Item @label="Applied to children">
      <Hds::TooltipButton @text="Here is more info" @isInline={{false}} aria-label="Information">
        <div class="hds-typography-display-400 hds-foreground-warning-on-surface hds-surface-warning">
          Lorem ipsum dolor
        </div>
      </Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::Body>Using a custom class</Shw::Text::Body>

  <Shw::Flex {{style gap="2rem"}} as |SF|>
    <SF.Item @label="Applied to parent">
      <div class="shw-component-tooltip-font-style">
        <Hds::TooltipButton @text="Here is more info" @isInline={{false}} aria-label="Information">
          Lorem ipsum dolor
        </Hds::TooltipButton>
      </div>
    </SF.Item>
    <SF.Item @label="Applied to the button">
      <Hds::TooltipButton class="shw-component-tooltip-font-style" @text="Here is more info">
        Lorem ipsum dolor
      </Hds::TooltipButton>
    </SF.Item>
    <SF.Item @label="Applied to children">
      <Hds::TooltipButton @text="Here is more info" @isInline={{false}} aria-label="Information">
        <div class="shw-component-tooltip-font-style">
          Lorem ipsum dolor
        </div>
      </Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::Body>Style interference</Shw::Text::Body>

  <Shw::Flex {{style gap="2rem"}} as |SF|>
    <SF.Item @label="Parent has `white-space: nowrap`">
      <div {{style whiteSpace="nowrap"}}>
        <Hds::TooltipButton
          @text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
        >
          <FlightIcon @name="info" />
        </Hds::TooltipButton>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>States</Shw::Text::H3>

  <Shw::Text::Body>
    The button which serves as the opener for the tooltip has no special styles of its own other than for the focus
    state.
  </Shw::Text::Body>

  <Shw::Text::Body>
    <strong>Note:</strong>
    There is a bug with the position of the tooltips below which are set to show on page load for example purposes. If
    you scroll the page a bit they will snap back to showing as centered. (Tooltips displayed on hover or focus do not
    have this bug.)
  </Shw::Text::Body>

  <Shw::Text::H4>With icon as opener content</Shw::Text::H4>

  <Shw::Flex {{style gap="5rem"}} as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}}>
        {{#if (or (eq state "hover") (eq state "focus"))}}
          <Hds::TooltipButton
            @text="More info"
            mock-state-value={{state}}
            @extraTippyOptions={{hash showOnCreate=true}}
            aria-label="Information"
          ><FlightIcon @name="info" /></Hds::TooltipButton>
        {{else}}
          <Hds::TooltipButton @text="More info" aria-label="Information" mock-state-value={{state}}><FlightIcon
              @name="info"
            /></Hds::TooltipButton>
        {{/if}}
      </SF.Item>
    {{/each}}
  </Shw::Flex>

  <Shw::Text::H4>With text as opener content</Shw::Text::H4>

  <Shw::Flex {{style gap="5rem"}} as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}}>
        {{#if (or (eq state "hover") (eq state "focus"))}}
          <Hds::TooltipButton
            @text="More info"
            mock-state-value={{state}}
            @extraTippyOptions={{hash showOnCreate=true}}
          >Text</Hds::TooltipButton>
        {{else}}
          <Hds::TooltipButton @text="More info" mock-state-value={{state}}>Text</Hds::TooltipButton>
        {{/if}}
      </SF.Item>
    {{/each}}
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>Options</Shw::Text::H3>

  <Shw::Text::H4>Placement</Shw::Text::H4>
  <Shw::Grid class="shw-component-tooltip-placement-grid" @columns={{5}} as |SG|>
    {{#each @model.PLACEMENTS as |place|}}
      <SG.Item class="shw-component-tooltip-placement-grid__item--{{place}}">
        <Hds::TooltipButton @text="More info" @placement={{place}} @extraTippyOptions={{hash showOnCreate=true}}>
          <div class="shw-component-tooltip-placement-grid__target">{{place}}</div>
        </Hds::TooltipButton>
      </SG.Item>
    {{/each}}
  </Shw::Grid>

  <Shw::Text::H4>Offset</Shw::Text::H4>

  <Shw::Flex {{style gap="5rem" margin-top="4rem"}} as |SF|>
    <SF.Item>
      <Hds::TooltipButton
        @text="More info"
        @extraTippyOptions={{hash showOnCreate=true}}
        class="shw-component-tooltip-outline"
      >Default offset</Hds::TooltipButton>
    </SF.Item>

    <SF.Item>
      <Hds::TooltipButton
        @text="More info"
        @offset={{array 0 40}}
        @extraTippyOptions={{hash showOnCreate=true}}
        class="shw-component-tooltip-outline"
      >Offset: 0 40</Hds::TooltipButton>
    </SF.Item>

    <SF.Item>
      <Hds::TooltipButton
        @text="More info"
        @offset={{array 20 0}}
        @extraTippyOptions={{hash showOnCreate=true}}
        class="shw-component-tooltip-outline"
      >Offset: 20 0</Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>
</section>

<Shw::Text::H4>With allowHTML=true</Shw::Text::H4>
<Hds::TooltipButton
  @extraTippyOptions={{hash allowHTML=true showOnCreate=true}}
  @placement="right"
  @text="<b>Hello</b> <em>there</em>!"
  aria-label="Information"
>
  <FlightIcon @name="info" />
</Hds::TooltipButton>

<Shw::Divider />

<section data-test-percy>
  <Shw::Text::H2><code>hds-tooltip</code> modifier</Shw::Text::H2>

  <Shw::Text::H3>Content</Shw::Text::H3>

  <Shw::Text::H4>On its own</Shw::Text::H4>

  <Shw::Flex as |SF|>
    <SF.Item @label="On a button">
      <Hds::Button @text="Submit" {{hds-tooltip "Submit all your data"}} />
    </SF.Item>

    <SF.Item @label="On a link">
      <Hds::Link::Standalone
        @icon="external-link"
        @iconPosition="trailing"
        @text="Acme Corp"
        @href="#"
        {{hds-tooltip "This link takes you to a 3rd party site"}}
      />
    </SF.Item>

    <SF.Item @label="On an input">
      <Hds::Form::Field @layout="vertical" as |F|>
        <F.Label @controlId="tooltip-example-control-id">First Name</F.Label>
        <F.Control>
          <input
            type="text"
            value="Jane"
            id="tooltip-example-control-id"
            {{hds-tooltip "Enter only your first name"}}
          />
        </F.Control>
      </Hds::Form::Field>
    </SF.Item>
  </Shw::Flex>
</section>