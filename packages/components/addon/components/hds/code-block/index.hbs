{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

<div class={{this.classNames}} ...attributes>
  {{#if (or @title @description)}}
    <div class="hds-code-block__header">
      {{#if @title}}
        <Hds::CodeBlock::Title>{{@title}}</Hds::CodeBlock::Title>
      {{/if}}

      {{#if @description}}
        <Hds::CodeBlock::Description>{{@description}}</Hds::CodeBlock::Description>
      {{/if}}
    </div>
  {{/if}}

  <pre
    class="code-block__code"
    {{style maxHeight=@maxHeight}}
    contentEditable={{not this.isReadOnly}}
    data-line={{@highlightLines}}
  >
    {{~! ~}}
    <code {{did-insert this.setPrismCode}} {{did-update this.setPrismCode this.code @language}}>
      {{~this.prismCode~}}
    </code>
    {{~! ~}}
  </pre>

  {{#if @hasCopyButton}}
    <Hds::CodeBlock::CopyButton @textToCopy={{@value}} />
  {{/if}}
</div>