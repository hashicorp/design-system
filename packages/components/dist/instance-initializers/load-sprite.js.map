{"version":3,"file":"load-sprite.js","sources":["../../src/instance-initializers/load-sprite.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport config from 'ember-get-config';\nimport type ApplicationInstance from '@ember/application/instance';\n\nexport async function initialize(\n  appInstance: ApplicationInstance & {\n    __flightIconsSpriteLoaded?: boolean;\n  }\n) {\n  console.log(appInstance, appInstance.__flightIconsSpriteLoaded);\n\n  if (\n    config?.emberFlightIcons?.lazyEmbed &&\n    appInstance.__flightIconsSpriteLoaded !== true\n  ) {\n    const { default: svgSprite } = await import(\n      '@hashicorp/flight-icons/svg-sprite/svg-sprite-module'\n    );\n\n    // in test environments we can inject the sprite directly into the ember testing container\n    // to avoid issues with tools like Percy that only consider content inside that element\n    if (config.environment === 'test') {\n      window.document\n        ?.getElementById('ember-testing')\n        ?.insertAdjacentHTML('afterbegin', svgSprite);\n    } else {\n      window.document?.body?.insertAdjacentHTML('beforeend', svgSprite);\n    }\n\n    appInstance.__flightIconsSpriteLoaded = true;\n  }\n}\n\nexport default {\n  initialize,\n};\n"],"names":["initialize","appInstance","console","log","__flightIconsSpriteLoaded","config","emberFlightIcons","lazyEmbed","default","svgSprite","environment","window","document","getElementById","insertAdjacentHTML","body"],"mappings":";;AAAA;AACA;AACA;AACA;;AAKO,eAAeA,UAAUA,CAC9BC,WAEC,EACD;EACAC,OAAO,CAACC,GAAG,CAACF,WAAW,EAAEA,WAAW,CAACG,yBAAyB,CAAC,CAAA;EAE/D,IACEC,MAAM,EAAEC,gBAAgB,EAAEC,SAAS,IACnCN,WAAW,CAACG,yBAAyB,KAAK,IAAI,EAC9C;IACA,MAAM;AAAEI,MAAAA,OAAO,EAAEC,SAAAA;AAAU,KAAC,GAAG,MAAM,OACnC,sDACF,CAAC,CAAA;;AAED;AACA;AACA,IAAA,IAAIJ,MAAM,CAACK,WAAW,KAAK,MAAM,EAAE;AACjCC,MAAAA,MAAM,CAACC,QAAQ,EACXC,cAAc,CAAC,eAAe,CAAC,EAC/BC,kBAAkB,CAAC,YAAY,EAAEL,SAAS,CAAC,CAAA;AACjD,KAAC,MAAM;MACLE,MAAM,CAACC,QAAQ,EAAEG,IAAI,EAAED,kBAAkB,CAAC,WAAW,EAAEL,SAAS,CAAC,CAAA;AACnE,KAAA;IAEAR,WAAW,CAACG,yBAAyB,GAAG,IAAI,CAAA;AAC9C,GAAA;AACF,CAAA;AAEA,iBAAe;AACbJ,EAAAA,UAAAA;AACF,CAAC;;;;"}