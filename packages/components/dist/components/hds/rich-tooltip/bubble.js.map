{"version":3,"file":"bubble.js","sources":["../../../../src/components/hds/rich-tooltip/bubble.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { assert } from '@ember/debug';\n\nimport type { ModifierLike } from '@glint/template';\nimport type { SetupPrimitivePopoverModifier } from '../popover-primitive';\nimport type { HdsAnchoredPositionOptions } from '../../../modifiers/hds-anchored-position.ts';\nimport {\n  DEFAULT_PLACEMENT,\n  PLACEMENTS,\n} from '../../../modifiers/hds-anchored-position.ts';\n\nexport interface HdsRichTooltipBubbleSignature {\n  Args: {\n    placement?: HdsAnchoredPositionOptions['placement'];\n    offset?: HdsAnchoredPositionOptions['offsetOptions'];\n    enableCollisionDetection?: HdsAnchoredPositionOptions['enableCollisionDetection'];\n    width?: string;\n    height?: string;\n    isOpen?: boolean;\n    popoverId: string;\n    arrowId: string;\n    setupPrimitivePopover: ModifierLike<SetupPrimitivePopoverModifier>;\n  };\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsRichTooltipBubble extends Component<HdsRichTooltipBubbleSignature> {\n  /**\n   * @param placement\n   * @type {string}\n   * @description Determines the position of the \"popover\"\n   */\n  get placement(): HdsAnchoredPositionOptions['placement'] {\n    const { placement = DEFAULT_PLACEMENT } = this.args;\n\n    assert(\n      `@placement for \"Hds::RichTooltip::Bubble\" must be one of the following: ${PLACEMENTS.join(\n        ', '\n      )}; received: ${placement}`,\n      PLACEMENTS.includes(placement)\n    );\n\n    return placement;\n  }\n\n  get enableCollisionDetection(): HdsAnchoredPositionOptions['enableCollisionDetection'] {\n    return this.args.enableCollisionDetection ?? true;\n  }\n\n  get sizingStyles(): Record<string, string> {\n    const sizingStyles: {\n      width?: string;\n      'max-width'?: string;\n      height?: string;\n      'max-height'?: string;\n    } = {};\n\n    if (this.args.width) {\n      sizingStyles['width'] = this.args.width;\n      sizingStyles['max-width'] = 'none';\n    }\n\n    if (this.args.height) {\n      sizingStyles['height'] = this.args.height;\n      sizingStyles['max-height'] = 'none';\n    }\n\n    return sizingStyles;\n  }\n\n  get anchoredPositionOptions(): {\n    placement: HdsAnchoredPositionOptions['placement'];\n    offsetOptions: HdsAnchoredPositionOptions['offsetOptions'];\n    enableCollisionDetection: HdsAnchoredPositionOptions['enableCollisionDetection'];\n    arrowSelector: string;\n    arrowPadding: HdsAnchoredPositionOptions['arrowPadding'];\n  } {\n    // custom options specific for the `RichTooltip` component\n    // for details see the `hds-anchored-position` modifier\n    return {\n      placement: this.placement,\n      offsetOptions: this.args.offset ?? 12,\n      enableCollisionDetection: this.args.enableCollisionDetection ?? true,\n      arrowSelector: `#${this.args.arrowId}`,\n      arrowPadding: 12,\n    };\n  }\n}\n"],"names":["HdsRichTooltipBubble","Component","placement","DEFAULT_PLACEMENT","args","assert","PLACEMENTS","join","includes","enableCollisionDetection","sizingStyles","width","height","anchoredPositionOptions","offsetOptions","offset","arrowSelector","arrowId","arrowPadding","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;;AA+Be,MAAMA,oBAAoB,SAASC,SAAS,CAAgC;AACzF;AACF;AACA;AACA;AACA;EACE,IAAIC,SAASA,GAA4C;IACvD,MAAM;AAAEA,MAAAA,SAAS,GAAGC;KAAmB,GAAG,IAAI,CAACC,IAAI;AAEnDC,IAAAA,MAAM,CACJ,CAA2EC,wEAAAA,EAAAA,UAAU,CAACC,IAAI,CACxF,IACF,CAAC,CAAA,YAAA,EAAeL,SAAS,CAAA,CAAE,EAC3BI,UAAU,CAACE,QAAQ,CAACN,SAAS,CAC/B,CAAC;AAED,IAAA,OAAOA,SAAS;AAClB;EAEA,IAAIO,wBAAwBA,GAA2D;AACrF,IAAA,OAAO,IAAI,CAACL,IAAI,CAACK,wBAAwB,IAAI,IAAI;AACnD;EAEA,IAAIC,YAAYA,GAA2B;IACzC,MAAMA,YAKL,GAAG,EAAE;AAEN,IAAA,IAAI,IAAI,CAACN,IAAI,CAACO,KAAK,EAAE;MACnBD,YAAY,CAAC,OAAO,CAAC,GAAG,IAAI,CAACN,IAAI,CAACO,KAAK;AACvCD,MAAAA,YAAY,CAAC,WAAW,CAAC,GAAG,MAAM;AACpC;AAEA,IAAA,IAAI,IAAI,CAACN,IAAI,CAACQ,MAAM,EAAE;MACpBF,YAAY,CAAC,QAAQ,CAAC,GAAG,IAAI,CAACN,IAAI,CAACQ,MAAM;AACzCF,MAAAA,YAAY,CAAC,YAAY,CAAC,GAAG,MAAM;AACrC;AAEA,IAAA,OAAOA,YAAY;AACrB;EAEA,IAAIG,uBAAuBA,GAMzB;AACA;AACA;IACA,OAAO;MACLX,SAAS,EAAE,IAAI,CAACA,SAAS;AACzBY,MAAAA,aAAa,EAAE,IAAI,CAACV,IAAI,CAACW,MAAM,IAAI,EAAE;AACrCN,MAAAA,wBAAwB,EAAE,IAAI,CAACL,IAAI,CAACK,wBAAwB,IAAI,IAAI;AACpEO,MAAAA,aAAa,EAAE,CAAI,CAAA,EAAA,IAAI,CAACZ,IAAI,CAACa,OAAO,CAAE,CAAA;AACtCC,MAAAA,YAAY,EAAE;KACf;AACH;AACF;AAACC,oBAAA,CAAAC,QAAA,EA7DoBpB,oBAAoB,CAAA;;;;"}