{"version":3,"file":"index.js","sources":["../../../../src/components/hds/disclosure-primitive/index.hbs","../../../../src/components/hds/disclosure-primitive/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div class=\\\"hds-disclosure-primitive\\\" {{did-update this.onStateChange @isOpen}} ...attributes>\\n  <div class=\\\"hds-disclosure-primitive__toggle\\\">\\n    {{yield (hash onClickToggle=this.onClickToggle isOpen=this.isOpen) to=\\\"toggle\\\"}}\\n  </div>\\n  {{#if this.isOpen}}\\n    <div class=\\\"hds-disclosure-primitive__content\\\">\\n      {{yield (hash close=this.close) to=\\\"content\\\"}}\\n    </div>\\n  {{/if}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\nimport { schedule } from '@ember/runloop';\n\nexport interface HdsDisclosurePrimitiveSignature {\n  Args: {\n    isOpen?: boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onClose?: (...args: any[]) => void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onClickToggle?: (...args: any[]) => void;\n  };\n  Blocks: {\n    toggle: [\n      {\n        isOpen: boolean;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        onClickToggle: (...args: any[]) => void;\n      },\n    ];\n    content: [\n      {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        close: (...args: any[]) => void;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsDisclosurePrimitiveComponent extends Component<HdsDisclosurePrimitiveSignature> {\n  @tracked _isOpen = false;\n  @tracked _isControlled = this.args.isOpen !== undefined;\n\n  get isOpen(): boolean {\n    if (this._isControlled) {\n      // if the state is controlled from outside, the argument overrides the internal state\n      return this.args.isOpen ?? this._isOpen;\n    } else {\n      // if the state changes internally, the internal state overrides the argument\n      return this._isOpen;\n    }\n  }\n\n  set isOpen(value) {\n    this._isOpen = value || false;\n  }\n\n  @action\n  onClickToggle(): void {\n    this.isOpen = !this.isOpen;\n    this._isControlled = false;\n    // we call the \"onClickToggle\" callback if it exists and it's a function\n    if (\n      this.args.onClickToggle &&\n      typeof this.args.onClickToggle === 'function'\n    ) {\n      this.args.onClickToggle(this.isOpen);\n    }\n  }\n\n  @action\n  onStateChange(): void {\n    if (this.args.isOpen !== undefined) {\n      this.isOpen = this.args.isOpen;\n    }\n    this._isControlled = true;\n  }\n\n  @action\n  close(): void {\n    // we schedule this afterRender to avoid an error in tests caused by updating `isOpen` multiple times in the same computation\n    schedule('afterRender', (): void => {\n      this.isOpen = false;\n      // we call the \"onClose\" callback if it exists (and is a function)\n      if (this.args.onClose && typeof this.args.onClose === 'function') {\n        this.args.onClose();\n      }\n    });\n  }\n}\n"],"names":["HdsDisclosurePrimitiveComponent","_class","Component","constructor","args","_initializerDefineProperty","_descriptor","_descriptor2","isOpen","_isControlled","_isOpen","value","onClickToggle","onStateChange","undefined","close","schedule","onClose","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}