{"version":3,"file":"index.js","sources":["../../../../src/components/hds/disclosure-primitive/index.hbs","../../../../src/components/hds/disclosure-primitive/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div class=\\\"hds-disclosure-primitive\\\" {{did-update this.onStateChange @isOpen}} ...attributes>\\n  <div class=\\\"hds-disclosure-primitive__toggle\\\">\\n    {{yield (hash onClickToggle=this.onClickToggle isOpen=this.isOpen contentId=this._contentId) to=\\\"toggle\\\"}}\\n  </div>\\n  <div class=\\\"hds-disclosure-primitive__content\\\" id={{this._contentId}}>\\n    {{#if this.isOpen}}\\n      {{yield (hash close=this.close) to=\\\"content\\\"}}\\n    {{/if}}\\n  </div>\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\nimport { schedule } from '@ember/runloop';\nimport { guidFor } from '@ember/object/internals';\n\nexport interface HdsDisclosurePrimitiveSignature {\n  Args: {\n    isOpen?: boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onClose?: (...args: any[]) => void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onClickToggle?: (...args: any[]) => void;\n  };\n  Blocks: {\n    toggle: [\n      {\n        contentId: string;\n        isOpen: boolean;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        onClickToggle: (...args: any[]) => void;\n      },\n    ];\n    content: [\n      {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        close: (...args: any[]) => void;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsDisclosurePrimitive extends Component<HdsDisclosurePrimitiveSignature> {\n  @tracked private _isOpen = false;\n  @tracked private _isControlled = this.args.isOpen !== undefined;\n  private _contentId = 'content-' + guidFor(this);\n\n  get isOpen(): boolean {\n    if (this._isControlled) {\n      // if the state is controlled from outside, the argument overrides the internal state\n      return this.args.isOpen ?? this._isOpen;\n    } else {\n      // if the state changes internally, the internal state overrides the argument\n      return this._isOpen;\n    }\n  }\n\n  set isOpen(value) {\n    this._isOpen = value || false;\n  }\n\n  @action\n  onClickToggle(): void {\n    this.isOpen = !this.isOpen;\n    this._isControlled = false;\n    // we call the \"onClickToggle\" callback if it exists and it's a function\n    if (\n      this.args.onClickToggle &&\n      typeof this.args.onClickToggle === 'function'\n    ) {\n      this.args.onClickToggle(this.isOpen);\n    }\n  }\n\n  @action\n  onStateChange(): void {\n    if (this.args.isOpen !== undefined) {\n      this.isOpen = this.args.isOpen;\n    }\n    this._isControlled = true;\n  }\n\n  @action\n  close(): void {\n    // we schedule this afterRender to avoid an error in tests caused by updating `isOpen` multiple times in the same computation\n    // eslint-disable-next-line ember/no-runloop\n    schedule('afterRender', (): void => {\n      this.isOpen = false;\n      // we call the \"onClose\" callback if it exists (and is a function)\n      if (this.args.onClose && typeof this.args.onClose === 'function') {\n        this.args.onClose();\n      }\n    });\n  }\n}\n"],"names":["HdsDisclosurePrimitive","_class","Component","constructor","args","_initializerDefineProperty","_descriptor","_descriptor2","_defineProperty","guidFor","isOpen","_isControlled","_isOpen","value","onClickToggle","onStateChange","undefined","close","schedule","onClose","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}