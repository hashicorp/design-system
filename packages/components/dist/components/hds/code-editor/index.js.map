{"version":3,"file":"index.js","sources":["../../../../src/components/hds/code-editor/index.hbs","../../../../src/components/hds/code-editor/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n\\n<div class={{this.classNames}} ...attributes>\\n  {{#if (and this.isSetupComplete (or this.hasToolbarButton (has-block)))}}\\n    <div class=\\\"hds-code-editor__header\\\">\\n      <div class=\\\"hds-code-editor__header-content\\\">\\n        {{yield\\n          (hash\\n            Title=(component \\\"hds/code-editor/title\\\")\\n            Description=(component \\\"hds/code-editor/description\\\")\\n            Button=(component \\\"hds/code-editor/button\\\")\\n          )\\n        }}\\n      </div>\\n\\n      {{#if this.hasToolbarButton}}\\n        <div class=\\\"hds-code-editor__header-toolbar\\\">\\n          {{#if @hasCopyButton}}\\n            <Hds::Copy::Button\\n              class=\\\"hds-code-editor__button hds-code-editor__copy-button\\\"\\n              @isIconOnly={{true}}\\n              @size=\\\"small\\\"\\n              @text=\\\"Copy\\\"\\n              @textToCopy={{@value}}\\n            />\\n          {{/if}}\\n          {{#if @hasExpandButton}}\\n            <Hds::CodeEditor::Button\\n              class=\\\"hds-code-editor__expand-button\\\"\\n              @isIconOnly={{true}}\\n              @size=\\\"small\\\"\\n              @icon=\\\"maximize\\\"\\n              @text=\\\"Fullscreen\\\"\\n              {{on \\\"click\\\" this.toggleFullscreen}}\\n            />\\n          {{/if}}\\n        </div>\\n      {{/if}}\\n    </div>\\n  {{/if}}\\n  <div\\n    class=\\\"hds-code-editor__editor\\\"\\n    {{hds-code-editor value=@value language=@language onInput=@onInput onSetup=this.onSetup}}\\n  />\\n  {{#unless this.isSetupComplete}}\\n    <div class=\\\"hds-code-editor__loader\\\">\\n      <Hds::Icon @name=\\\"loading\\\" @color=\\\"var(--hds-code-editor-color-foreground-primary)\\\" @size=\\\"24\\\" />\\n    </div>\\n  {{/unless}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\n\nimport type { ComponentLike } from '@glint/template';\nimport type { HdsCodeEditorSignature as HdsCodeEditorModifierSignature } from 'src/modifiers/hds-code-editor';\nimport type { HdsButtonSignature } from 'src/components/hds/button';\nimport type { HdsCodeEditorDescriptionSignature } from './description';\nimport type { HdsCodeEditorTitleSignature } from './title';\nimport type { EditorView } from '@codemirror/view';\n\nexport interface HdsCodeEditorSignature {\n  Args: {\n    hasCopyButton?: boolean;\n    hasExpandButton?: boolean;\n    language?: HdsCodeEditorModifierSignature['Args']['Named']['language'];\n    value?: HdsCodeEditorModifierSignature['Args']['Named']['value'];\n    onInput?: HdsCodeEditorModifierSignature['Args']['Named']['onInput'];\n    onSetup?: HdsCodeEditorModifierSignature['Args']['Named']['onSetup'];\n  };\n  Blocks: {\n    default: [\n      {\n        Title?: ComponentLike<HdsCodeEditorTitleSignature>;\n        Description?: ComponentLike<HdsCodeEditorDescriptionSignature>;\n        Button?: ComponentLike<HdsButtonSignature>;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsCodeEditor extends Component<HdsCodeEditorSignature> {\n  @tracked isFullscreen = false;\n  @tracked isSetupComplete = false;\n\n  get classNames(): string {\n    // Currently there is only one theme so the class name is hard-coded.\n    // In the future, additional themes such as a \"light\" theme could be added.\n    const classes = ['hds-code-editor', 'hds-code-editor--theme-dark'];\n\n    if (this.isFullscreen) {\n      classes.push('hds-code-editor--is-fullscreen');\n    }\n\n    return classes.join(' ');\n  }\n\n  get hasToolbarButton(): boolean {\n    return (this.args.hasCopyButton || this.args.hasExpandButton) ?? false;\n  }\n\n  @action\n  onSetup(editorView: EditorView): void {\n    this.isSetupComplete = true;\n    this.args.onSetup?.(editorView);\n  }\n\n  @action\n  toggleFullscreen(): void {\n    this.isFullscreen = !this.isFullscreen;\n  }\n}\n"],"names":["HdsCodeEditor","_class","Component","constructor","args","_initializerDefineProperty","_descriptor","_descriptor2","classNames","classes","isFullscreen","push","join","hasToolbarButton","hasCopyButton","hasExpandButton","onSetup","editorView","isSetupComplete","toggleFullscreen","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;AACA,eAAe,kBAAkB,CAAC,6tDAA6tD;;;ACoC1uDA,IAAAA,aAAa,IAAAC,MAAA,GAAnB,MAAMD,aAAa,SAASE,SAAS,CAAyB;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA;AAAAC,IAAAA,0BAAA,uBAAAC,WAAA,EAAA,IAAA,CAAA;AAAAD,IAAAA,0BAAA,0BAAAE,YAAA,EAAA,IAAA,CAAA;AAAA;EAI3E,IAAIC,UAAUA,GAAW;AACvB;AACA;AACA,IAAA,MAAMC,OAAO,GAAG,CAAC,iBAAiB,EAAE,6BAA6B,CAAC;IAElE,IAAI,IAAI,CAACC,YAAY,EAAE;AACrBD,MAAAA,OAAO,CAACE,IAAI,CAAC,gCAAgC,CAAC;AAChD;AAEA,IAAA,OAAOF,OAAO,CAACG,IAAI,CAAC,GAAG,CAAC;AAC1B;EAEA,IAAIC,gBAAgBA,GAAY;AAC9B,IAAA,OAAO,CAAC,IAAI,CAACT,IAAI,CAACU,aAAa,IAAI,IAAI,CAACV,IAAI,CAACW,eAAe,KAAK,KAAK;AACxE;EAGAC,OAAOA,CAACC,UAAsB,EAAQ;IACpC,IAAI,CAACC,eAAe,GAAG,IAAI;AAC3B,IAAA,IAAI,CAACd,IAAI,CAACY,OAAO,GAAGC,UAAU,CAAC;AACjC;AAGAE,EAAAA,gBAAgBA,GAAS;AACvB,IAAA,IAAI,CAACT,YAAY,GAAG,CAAC,IAAI,CAACA,YAAY;AACxC;AACF,CAAC,EAAAJ,WAAA,GAAAc,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,EAAA,cAAA,EAAA,CA7BEC,OAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAgB,KAAK;AAAA;AAAA,CAAAnB,CAAAA,EAAAA,YAAA,GAAAa,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,sBAC5BC,OAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAmB,KAAK;AAAA;AAAA,CAAA,CAAA,EAAAN,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,EAAA,SAAA,EAAA,CAkB/BM,MAAM,CAAAC,EAAAA,MAAA,CAAAC,wBAAA,CAAA5B,MAAA,CAAAoB,SAAA,EAAApB,SAAAA,CAAAA,EAAAA,MAAA,CAAAoB,SAAA,CAAA,EAAAD,yBAAA,CAAAnB,MAAA,CAAAoB,SAAA,uBAMNM,MAAM,CAAA,EAAAC,MAAA,CAAAC,wBAAA,CAAA5B,MAAA,CAAAoB,SAAA,EAAA,kBAAA,CAAA,EAAApB,MAAA,CAAAoB,SAAA,GAAApB,MAAA;AA1ByB6B,oBAAA,CAAAC,QAAA,EAAb/B,aAAa,CAAA;;;;"}