{"version":3,"file":"index.js","sources":["../../../../src/components/hds/app-header/index.hbs","../../../../src/components/hds/app-header/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n\\n<div\\n  class={{this.classNames}}\\n  {{! @glint-expect-error - https://github.com/josemarluedke/ember-focus-trap/issues/86 }}\\n  {{focus-trap isActive=this.shouldTrapFocus}}\\n  ...attributes\\n>\\n  {{#if (and this.hasA11yRefocus (not this.isOpen))}}\\n    {{! @glint-expect-error - `ember-a11y-refocus` doesn\\'t expose types yet }}\\n    <NavigationNarrator\\n      @routeChangeValidator={{@a11yRefocusRouteChangeValidator}}\\n      @skipTo={{this.a11yRefocusSkipTo}}\\n      @skipText={{@a11yRefocusSkipText}}\\n      @navigationText={{@a11yRefocusNavigationText}}\\n      @excludeAllQueryParams={{@a11yRefocusExcludeAllQueryParams}}\\n    />\\n  {{/if}}\\n\\n  {{yield to=\\\"logo\\\"}}\\n\\n  {{#if (not this.isDesktop)}}\\n    <Hds::AppHeader::MenuButton\\n      @onClickToggle={{this.onClickToggle}}\\n      @isOpen={{this.isOpen}}\\n      @menuContentId={{this.menuContentId}}\\n    />\\n  {{/if}}\\n\\n  <div class=\\\"hds-app-header__actions\\\" id={{this.menuContentId}}>\\n    <div class=\\\"hds-app-header__global-actions\\\">\\n      {{yield to=\\\"globalActions\\\"}}\\n    </div>\\n\\n    <div class=\\\"hds-app-header__utility-actions\\\">\\n      {{yield to=\\\"utilityActions\\\"}}\\n    </div>\\n  </div>\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { guidFor } from '@ember/object/internals';\nimport { tracked } from '@glimmer/tracking';\nimport { registerDestructor } from '@ember/destroyable';\n\nexport interface HdsAppHeaderSignature {\n  Args: {\n    breakpoint?: string;\n    hasA11yRefocus?: boolean;\n    a11yRefocusSkipTo?: string;\n    a11yRefocusSkipText?: string;\n    a11yRefocusNavigationText?: string;\n    a11yRefocusRouteChangeValidator?: string;\n    a11yRefocusExcludeAllQueryParams?: boolean;\n  };\n  Blocks: {\n    logo?: [];\n    globalActions?: [];\n    utilityActions?: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAppHeader extends Component<HdsAppHeaderSignature> {\n  @tracked isOpen = false;\n  @tracked isDesktop = true;\n  @tracked hasOverflowContent = false;\n  desktopMQ: MediaQueryList;\n  hasA11yRefocus = this.args.hasA11yRefocus ?? true;\n  a11yRefocusSkipTo = '#' + (this.args.a11yRefocusSkipTo ?? 'hds-main');\n\n  // Generates a unique ID for the Menu Content\n  menuContentId = 'hds-menu-content-' + guidFor(this);\n\n  breakpoint = parseInt(\n    getComputedStyle(document.documentElement).getPropertyValue(\n      '--hds-app-desktop-breakpoint'\n    )\n  );\n\n  desktopMQVal =\n    this.args.breakpoint ??\n    getComputedStyle(document.documentElement).getPropertyValue(\n      '--hds-app-desktop-breakpoint'\n    );\n\n  constructor(owner: unknown, args: Record<string, never>) {\n    super(owner, args);\n    this.desktopMQ = window.matchMedia(`(min-width: ${this.desktopMQVal})`);\n    this.addEventListeners();\n    registerDestructor(this, (): void => {\n      this.removeEventListeners();\n    });\n  }\n\n  addEventListeners(): void {\n    document.addEventListener('keydown', this.escapePress, true);\n    this.desktopMQ.addEventListener('change', this.updateDesktopVariable, true);\n\n    // set initial state based on viewport using a \"synthetic\" event\n    const syntheticEvent = new MediaQueryListEvent('change', {\n      matches: this.desktopMQ.matches,\n      media: this.desktopMQ.media,\n    });\n    this.updateDesktopVariable(syntheticEvent);\n  }\n\n  removeEventListeners(): void {\n    document.removeEventListener('keydown', this.escapePress, true);\n    this.desktopMQ.removeEventListener(\n      'change',\n      this.updateDesktopVariable,\n      true\n    );\n  }\n\n  // In mobile view when the menu is open, trap focus within the AppHeader\n  get shouldTrapFocus(): boolean {\n    return !this.isDesktop && this.isOpen;\n  }\n\n  // Get the class names to apply to the component.\n  get classNames(): string {\n    const classes = ['hds-app-header'];\n\n    if (this.isDesktop) {\n      classes.push('hds-app-header--is-desktop');\n    } else {\n      classes.push('hds-app-header--is-mobile');\n\n      // open and closed menu states are only relevant on mobile\n      if (this.isOpen) {\n        classes.push('hds-app-header--menu-is-open');\n      } else {\n        classes.push('hds-app-header--menu-is-closed');\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  @action\n  escapePress(event: KeyboardEvent): void {\n    if (event.key === 'Escape' && this.isOpen && !this.isDesktop) {\n      this.isOpen = false;\n    }\n  }\n\n  @action\n  onClickToggle(): void {\n    this.isOpen = !this.isOpen;\n  }\n\n  @action\n  updateDesktopVariable(event: MediaQueryListEvent): void {\n    this.isDesktop = event.matches;\n\n    // Close the menu when switching to desktop view\n    // (prevents menu from being open when resizing which causes Skip button to not render)\n    if (this.isDesktop) {\n      this.isOpen = false;\n    }\n  }\n}\n"],"names":["HdsAppHeader","_class","Component","constructor","owner","args","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_defineProperty","hasA11yRefocus","a11yRefocusSkipTo","guidFor","parseInt","getComputedStyle","document","documentElement","getPropertyValue","breakpoint","desktopMQ","window","matchMedia","desktopMQVal","addEventListeners","registerDestructor","removeEventListeners","addEventListener","escapePress","updateDesktopVariable","syntheticEvent","MediaQueryListEvent","matches","media","removeEventListener","shouldTrapFocus","isDesktop","isOpen","classNames","classes","push","join","event","key","onClickToggle","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}