{"version":3,"file":"index.js","sources":["../../../../src/components/hds/dropdown/index.hbs","../../../../src/components/hds/dropdown/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<Hds::PopoverPrimitive @isOpen={{@isOpen}} @onClose={{@onClose}} @enableClickEvents={{true}} as |PP|>\\n  <div class={{this.classNames}} ...attributes {{PP.setupPrimitiveContainer}}>\\n    {{yield\\n      (hash\\n        ToggleButton=(component\\n          \\\"hds/dropdown/toggle/button\\\" isOpen=PP.isOpen setupPrimitiveToggle=PP.setupPrimitiveToggle\\n        )\\n        ToggleIcon=(component \\\"hds/dropdown/toggle/icon\\\" isOpen=PP.isOpen setupPrimitiveToggle=PP.setupPrimitiveToggle)\\n      )\\n    }}\\n    <div\\n      tabindex=\\\"-1\\\"\\n      class={{this.classNamesContent}}\\n      {{style width=@width max-height=@height}}\\n      {{PP.setupPrimitivePopover anchoredPositionOptions=this.anchoredPositionOptions}}\\n    >\\n      {{#if (or PP.isOpen @preserveContentInDom)}}\\n        {{yield (hash Header=(component \\\"hds/dropdown/header\\\"))}}\\n        <ul class=\\\"hds-dropdown__list\\\" {{did-insert this.didInsertList}}>\\n          {{yield\\n            (hash\\n              close=PP.hidePopover\\n              Checkbox=(component \\\"hds/dropdown/list-item/checkbox\\\")\\n              Checkmark=(component \\\"hds/dropdown/list-item/checkmark\\\")\\n              CopyItem=(component \\\"hds/dropdown/list-item/copy-item\\\")\\n              Description=(component \\\"hds/dropdown/list-item/description\\\")\\n              Generic=(component \\\"hds/dropdown/list-item/generic\\\")\\n              Interactive=(component \\\"hds/dropdown/list-item/interactive\\\")\\n              Radio=(component \\\"hds/dropdown/list-item/radio\\\")\\n              Separator=(component \\\"hds/dropdown/list-item/separator\\\")\\n              Title=(component \\\"hds/dropdown/list-item/title\\\")\\n            )\\n          }}\\n        </ul>\\n        {{yield (hash close=PP.hidePopover Footer=(component \\\"hds/dropdown/footer\\\"))}}\\n      {{/if}}\\n    </div>\\n  </div>\\n</Hds::PopoverPrimitive>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\n\nimport {\n  // map Dropdown's `listPosition` values to PopoverPrimitive's `placement` values\n  HdsDropdownPositionToPlacementValues,\n  // Dropdown's `listPosition` values\n  HdsDropdownPositionValues,\n} from './types.ts';\n\nimport type { ComponentLike } from '@glint/template';\nimport type { MenuPrimitiveSignature } from '../menu-primitive';\nimport type { HdsDropdownFooterSignature } from './footer';\nimport type { HdsDropdownHeaderSignature } from './header';\nimport type { HdsDropdownListItemCheckboxSignature } from './list-item/checkbox';\nimport type { HdsDropdownListItemCheckmarkSignature } from './list-item/checkmark';\nimport type { HdsDropdownListItemCopyItemSignature } from './list-item/copy-item';\nimport type { HdsDropdownListItemDescriptionSignature } from './list-item/description';\nimport type { HdsDropdownListItemGenericSignature } from './list-item/generic';\nimport type { HdsDropdownListItemInteractiveSignature } from './list-item/interactive';\nimport type { HdsDropdownListItemRadioSignature } from './list-item/radio';\nimport type { HdsDropdownListItemSeparatorSignature } from './list-item/separator';\nimport type { HdsDropdownListItemTitleSignature } from './list-item/title';\nimport type { HdsDropdownToggleButtonSignature } from './toggle/button';\nimport type { HdsDropdownToggleIconSignature } from './toggle/icon';\nimport type { HdsDropdownPositions } from './types';\n\nimport type { FloatingUIOptions } from '../../../modifiers/hds-anchored-position.ts';\n\nexport const DEFAULT_POSITION = HdsDropdownPositionValues.BottomRight;\nexport const POSITIONS: string[] = Object.values(HdsDropdownPositionValues);\n\nexport interface HdsDropdownSignature {\n  Args: MenuPrimitiveSignature['Args'] & {\n    height?: string;\n    isInline?: boolean;\n    isOpen?: boolean;\n    listPosition?: HdsDropdownPositions;\n    width?: string;\n    enableCollisionDetection?: FloatingUIOptions['enableCollisionDetection'];\n    preserveContentInDom?: boolean;\n    matchToggleWidth?: boolean;\n  };\n  Blocks: {\n    default: [\n      {\n        Footer?: ComponentLike<HdsDropdownFooterSignature>;\n        Header?: ComponentLike<HdsDropdownHeaderSignature>;\n        Checkbox?: ComponentLike<HdsDropdownListItemCheckboxSignature>;\n        Checkmark?: ComponentLike<HdsDropdownListItemCheckmarkSignature>;\n        CopyItem?: ComponentLike<HdsDropdownListItemCopyItemSignature>;\n        Description?: ComponentLike<HdsDropdownListItemDescriptionSignature>;\n        Generic?: ComponentLike<HdsDropdownListItemGenericSignature>;\n        Interactive?: ComponentLike<HdsDropdownListItemInteractiveSignature>;\n        Radio?: ComponentLike<HdsDropdownListItemRadioSignature>;\n        Separator?: ComponentLike<HdsDropdownListItemSeparatorSignature>;\n        Title?: ComponentLike<HdsDropdownListItemTitleSignature>;\n        ToggleButton?: ComponentLike<HdsDropdownToggleButtonSignature>;\n        ToggleIcon?: ComponentLike<HdsDropdownToggleIconSignature>;\n        close?: () => void;\n      },\n    ];\n  };\n  Element: MenuPrimitiveSignature['Element'];\n}\n\nexport default class HdsDropdown extends Component<HdsDropdownSignature> {\n  /**\n   * @param listPosition\n   * @type {string}\n   * @default bottom-right\n   * @description Determines the position of the \"list\"\n   */\n  get listPosition(): HdsDropdownPositions {\n    const { listPosition = DEFAULT_POSITION } = this.args;\n\n    assert(\n      `@listPosition for \"Hds::Dropdown::Index\" must be one of the following: ${POSITIONS.join(\n        ', '\n      )}; received: ${listPosition}`,\n      POSITIONS.includes(listPosition)\n    );\n\n    return listPosition;\n  }\n\n  get enableCollisionDetection(): FloatingUIOptions['enableCollisionDetection'] {\n    return this.args.enableCollisionDetection ?? false;\n  }\n\n  get matchToggleWidth(): FloatingUIOptions['matchToggleWidth'] {\n    return this.args.matchToggleWidth ?? false;\n  }\n\n  get anchoredPositionOptions(): {\n    placement: FloatingUIOptions['placement'];\n    offsetOptions: FloatingUIOptions['offsetOptions'];\n    enableCollisionDetection: FloatingUIOptions['enableCollisionDetection'];\n    matchToggleWidth: FloatingUIOptions['matchToggleWidth'];\n  } {\n    // custom options specific for the `RichTooltip` component\n    // for details see the `hds-anchored-position` modifier\n    return {\n      placement: HdsDropdownPositionToPlacementValues[this.listPosition],\n      offsetOptions: 4,\n      enableCollisionDetection: this.enableCollisionDetection ? 'flip' : false,\n      matchToggleWidth: this.matchToggleWidth,\n    };\n  }\n\n  /**\n   * Get the class names to apply to the element\n   * @method classNames\n   * @return {string} The \"class\" attribute to apply to the root element\n   */\n  get classNames(): string {\n    const classes = ['hds-dropdown'];\n\n    // add a class based on the @isInline argument\n    if (this.args.isInline) {\n      classes.push('hds-dropdown--is-inline');\n    }\n\n    return classes.join(' ');\n  }\n\n  /**\n   * Get the class names to apply to the content\n   * @method classNamesContent\n   * @return {string} The \"class\" attribute to apply to the disclosed content\n   */\n  get classNamesContent(): string {\n    const classes = ['hds-dropdown__content'];\n\n    // add a class based on the @listPosition argument\n    // TODO: we preserved these classes to avoid introducing breaking changes for consumers who rely on these classes for tests, but we aim to remove them in the next major release\n    // context: https://github.com/hashicorp/design-system/pull/2309#discussion_r1706941892\n    classes.push(`hds-dropdown__content--position-${this.listPosition}`);\n\n    // add a class based on the @width or @matchToggleWidth arguments\n    if (this.args.width || this.args.matchToggleWidth) {\n      classes.push('hds-dropdown__content--fixed-width');\n    }\n\n    return classes.join(' ');\n  }\n\n  @action\n  didInsertList(element: HTMLUListElement): void {\n    const checkmarkItems = element.querySelectorAll(`[role=\"option\"]`);\n    if (checkmarkItems.length) {\n      const toggleButtonId = element\n        .closest('.hds-dropdown')\n        ?.querySelector('.hds-dropdown-toggle-button')\n        ?.getAttribute('id');\n\n      element.setAttribute('role', 'listbox');\n\n      if (toggleButtonId) {\n        element.setAttribute('aria-labelledby', toggleButtonId);\n      }\n    }\n  }\n}\n"],"names":["DEFAULT_POSITION","HdsDropdownPositionValues","BottomRight","POSITIONS","Object","values","HdsDropdown","_class","Component","listPosition","args","assert","join","includes","enableCollisionDetection","matchToggleWidth","anchoredPositionOptions","placement","HdsDropdownPositionToPlacementValues","offsetOptions","classNames","classes","isInline","push","classNamesContent","width","didInsertList","element","checkmarkItems","querySelectorAll","length","toggleButtonId","closest","querySelector","getAttribute","setAttribute","_applyDecoratedDescriptor","prototype","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;AACA,eAAe,kBAAkB,CAAC,y3DAAy3D;;;ACkC94DA,MAAAA,gBAAgB,GAAGC,yBAAyB,CAACC;AACnD,MAAMC,SAAmB,GAAGC,MAAM,CAACC,MAAM,CAACJ,yBAAyB;AAoCrDK,IAAAA,WAAW,IAAAC,MAAA,GAAjB,MAAMD,WAAW,SAASE,SAAS,CAAuB;AACvE;AACF;AACA;AACA;AACA;AACA;EACE,IAAIC,YAAYA,GAAyB;IACvC,MAAM;AAAEA,MAAAA,YAAY,GAAGT;KAAkB,GAAG,IAAI,CAACU,IAAI;AAErDC,IAAAA,MAAM,CACJ,CAA0ER,uEAAAA,EAAAA,SAAS,CAACS,IAAI,CACtF,IACF,CAAC,CAAA,YAAA,EAAeH,YAAY,CAAA,CAAE,EAC9BN,SAAS,CAACU,QAAQ,CAACJ,YAAY,CACjC,CAAC;AAED,IAAA,OAAOA,YAAY;AACrB;EAEA,IAAIK,wBAAwBA,GAAkD;AAC5E,IAAA,OAAO,IAAI,CAACJ,IAAI,CAACI,wBAAwB,IAAI,KAAK;AACpD;EAEA,IAAIC,gBAAgBA,GAA0C;AAC5D,IAAA,OAAO,IAAI,CAACL,IAAI,CAACK,gBAAgB,IAAI,KAAK;AAC5C;EAEA,IAAIC,uBAAuBA,GAKzB;AACA;AACA;IACA,OAAO;AACLC,MAAAA,SAAS,EAAEC,oCAAoC,CAAC,IAAI,CAACT,YAAY,CAAC;AAClEU,MAAAA,aAAa,EAAE,CAAC;AAChBL,MAAAA,wBAAwB,EAAE,IAAI,CAACA,wBAAwB,GAAG,MAAM,GAAG,KAAK;MACxEC,gBAAgB,EAAE,IAAI,CAACA;KACxB;AACH;;AAEA;AACF;AACA;AACA;AACA;EACE,IAAIK,UAAUA,GAAW;AACvB,IAAA,MAAMC,OAAO,GAAG,CAAC,cAAc,CAAC;;AAEhC;AACA,IAAA,IAAI,IAAI,CAACX,IAAI,CAACY,QAAQ,EAAE;AACtBD,MAAAA,OAAO,CAACE,IAAI,CAAC,yBAAyB,CAAC;AACzC;AAEA,IAAA,OAAOF,OAAO,CAACT,IAAI,CAAC,GAAG,CAAC;AAC1B;;AAEA;AACF;AACA;AACA;AACA;EACE,IAAIY,iBAAiBA,GAAW;AAC9B,IAAA,MAAMH,OAAO,GAAG,CAAC,uBAAuB,CAAC;;AAEzC;AACA;AACA;IACAA,OAAO,CAACE,IAAI,CAAC,CAAA,gCAAA,EAAmC,IAAI,CAACd,YAAY,EAAE,CAAC;;AAEpE;IACA,IAAI,IAAI,CAACC,IAAI,CAACe,KAAK,IAAI,IAAI,CAACf,IAAI,CAACK,gBAAgB,EAAE;AACjDM,MAAAA,OAAO,CAACE,IAAI,CAAC,oCAAoC,CAAC;AACpD;AAEA,IAAA,OAAOF,OAAO,CAACT,IAAI,CAAC,GAAG,CAAC;AAC1B;EAGAc,aAAaA,CAACC,OAAyB,EAAQ;AAC7C,IAAA,MAAMC,cAAc,GAAGD,OAAO,CAACE,gBAAgB,CAAC,iBAAiB,CAAC;IAClE,IAAID,cAAc,CAACE,MAAM,EAAE;AACzB,MAAA,MAAMC,cAAc,GAAGJ,OAAO,CAC3BK,OAAO,CAAC,eAAe,CAAC,EACvBC,aAAa,CAAC,6BAA6B,CAAC,EAC5CC,YAAY,CAAC,IAAI,CAAC;AAEtBP,MAAAA,OAAO,CAACQ,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC;AAEvC,MAAA,IAAIJ,cAAc,EAAE;AAClBJ,QAAAA,OAAO,CAACQ,YAAY,CAAC,iBAAiB,EAAEJ,cAAc,CAAC;AACzD;AACF;AACF;AACF,CAAC,GAAAK,yBAAA,CAAA7B,MAAA,CAAA8B,SAAA,EAAA,eAAA,EAAA,CAhBEC,MAAM,CAAAlC,EAAAA,MAAA,CAAAmC,wBAAA,CAAAhC,MAAA,CAAA8B,SAAA,oBAAA9B,MAAA,CAAA8B,SAAA,CAAA,GAAA9B,MAAA;AAjFuBiC,oBAAA,CAAAC,QAAA,EAAXnC,WAAW,CAAA;;;;"}