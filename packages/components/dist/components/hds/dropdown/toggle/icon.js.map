{"version":3,"file":"icon.js","sources":["../../../../../src/components/hds/dropdown/toggle/icon.hbs","../../../../../src/components/hds/dropdown/toggle/icon.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<button\\n  class={{this.classNames}}\\n  aria-label={{this.text}}\\n  ...attributes\\n  aria-expanded={{if @isOpen \\\"true\\\" \\\"false\\\"}}\\n  {{@setupPrimitiveToggle}}\\n  {{did-update this.onDidUpdateImageSrc @imageSrc}}\\n  type=\\\"button\\\"\\n>\\n  <div class=\\\"hds-dropdown-toggle-icon__wrapper\\\">\\n    {{#if @imageSrc}}\\n      {{#if this._hasImage}}\\n        <img src={{@imageSrc}} alt=\\\"\\\" role=\\\"presentation\\\" {{on \\\"error\\\" this.onImageLoadError}} />\\n      {{else}}\\n        <Hds::Icon @name=\\\"user\\\" @size={{this.iconSize}} />\\n      {{/if}}\\n    {{else if @icon}}\\n      <Hds::Icon @name={{@icon}} @size={{this.iconSize}} />\\n    {{/if}}\\n  </div>\\n  {{#if this.hasChevron}}\\n    <Hds::Dropdown::Toggle::Chevron />\\n  {{/if}}\\n</button>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { tracked } from '@glimmer/tracking';\nimport { HdsDropdownToggleIconSizeValues } from './types.ts';\n\nimport type { HdsIconSignature } from '../../icon';\nimport type { HdsDropdownToggleIconSizes } from './types';\nimport type { ModifierLike } from '@glint/template';\nimport type { SetupPrimitiveToggleModifier } from '../../popover-primitive/index.ts';\n\nexport const DEFAULT_SIZE = HdsDropdownToggleIconSizeValues.Medium;\nexport const SIZES: string[] = Object.values(HdsDropdownToggleIconSizeValues);\n\nexport interface HdsDropdownToggleIconSignature {\n  Args: {\n    hasChevron?: boolean;\n    icon?: HdsIconSignature['Args']['name'];\n    imageSrc?: string;\n    isOpen?: boolean;\n    size?: HdsDropdownToggleIconSizes;\n    text: string;\n    setupPrimitiveToggle?: ModifierLike<SetupPrimitiveToggleModifier>;\n  };\n  Element: HTMLButtonElement;\n}\n\nexport default class HdsDropdownToggleIcon extends Component<HdsDropdownToggleIconSignature> {\n  @tracked private _hasImage = true;\n\n  constructor(owner: unknown, args: HdsDropdownToggleIconSignature['Args']) {\n    super(owner, args);\n    if (!(this.args.icon || this.args.imageSrc)) {\n      assert(\n        '@icon or @imageSrc must be defined for \"Hds::Dropdown::Toggle::Icon\"'\n      );\n    }\n  }\n\n  @action\n  onDidUpdateImageSrc(): void {\n    this._hasImage = true;\n  }\n\n  @action\n  onImageLoadError(): void {\n    this._hasImage = false;\n  }\n\n  /**\n   * @param text\n   * @type {string}\n   * @description The text of the `aria-label` applied to the toggle\n   */\n  get text(): string {\n    const { text } = this.args;\n\n    assert(\n      '@text for \"Hds::Dropdown::Toggle::Icon\" must have a valid value',\n      text !== undefined\n    );\n\n    return text;\n  }\n\n  /**\n   * @param size\n   * @type {string}\n   * @default medium\n   * @description The size of the button; acceptable values are `small` and `medium`\n   */\n  get size(): HdsDropdownToggleIconSizes {\n    const { size = DEFAULT_SIZE } = this.args;\n\n    assert(\n      `@size for \"Hds::Dropdown::Toggle::Icon\" must be one of the following: ${SIZES.join(\n        ', '\n      )}; received: ${size}`,\n      SIZES.includes(size)\n    );\n\n    return size;\n  }\n\n  /**\n   * @param iconSize\n   * @type {string}\n   * @default 24\n   * @description ensures that the correct icon size is used\n   */\n  get iconSize(): HdsIconSignature['Args']['size'] {\n    if (this.args.size === 'medium' && !this.hasChevron) {\n      // in this special case we use a larger SVG\n      return '24';\n    } else {\n      // this is the default size (notice: for the \"small\" variant with chevron, we set the actual size to `12px` via CSS)\n      return '16';\n    }\n  }\n\n  /**\n   * Indicates if a dropdown chevron icon should be displayed; should be displayed unless the \"more-horizontal\" icon is used.\n   *\n   * @param hasChevron\n   * @type {boolean}\n   * @default true\n   */\n  get hasChevron(): boolean {\n    return this.args.hasChevron ?? true;\n  }\n\n  /**\n   * Get the class names to apply to the component.\n   * @method ToggleIcon#classNames\n   * @return {string} The \"class\" attribute to apply to the component.\n   */\n  get classNames(): string {\n    const classes = ['hds-dropdown-toggle-icon'];\n\n    // add a class based on the @size argument\n    classes.push(`hds-dropdown-toggle-icon--size-${this.size}`);\n\n    // add a class based on the @isOpen argument\n    if (this.args.isOpen) {\n      classes.push('hds-dropdown-toggle-icon--is-open');\n    }\n\n    // add a class based on the @hasChevron argument\n    if (this.hasChevron) {\n      classes.push('hds-dropdown-toggle-icon--has-chevron');\n    }\n\n    return classes.join(' ');\n  }\n}\n"],"names":["DEFAULT_SIZE","HdsDropdownToggleIconSizeValues","Medium","SIZES","Object","values","HdsDropdownToggleIcon","_class","Component","constructor","owner","args","_initializerDefineProperty","_descriptor","icon","imageSrc","assert","onDidUpdateImageSrc","_hasImage","onImageLoadError","text","undefined","size","join","includes","iconSize","hasChevron","classNames","classes","push","isOpen","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}