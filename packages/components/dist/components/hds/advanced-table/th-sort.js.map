{"version":3,"file":"th-sort.js","sources":["../../../../src/components/hds/advanced-table/th-sort.hbs","../../../../src/components/hds/advanced-table/th-sort.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div\\n  class={{this.classNames}}\\n  aria-sort={{this.ariaSort}}\\n  role=\\\"columnheader\\\"\\n  aria-rowspan={{@rowspan}}\\n  aria-colspan={{@colspan}}\\n  {{did-insert this.didInsert}}\\n  {{will-destroy this.willDestroy}}\\n  {{! @glint-expect-error - https://github.com/josemarluedke/ember-focus-trap/issues/86 }}\\n  {{focus-trap\\n    isActive=this._shouldTrapFocus\\n    shouldSelfFocus=true\\n    focusTrapOptions=(hash\\n      onDeactivate=this.onFocusTrapDeactivate initialFocus=this.getInitialFocus clickOutsideDeactivates=true\\n    )\\n  }}\\n  ...attributes\\n>\\n  <div class=\\\"hds-advanced-table__th-content\\\">\\n    <span id={{this._labelId}} class=\\\"hds-typography-body-200 hds-font-weight-semibold\\\">{{yield}}</span>\\n    {{#if @tooltip}}\\n      <Hds::AdvancedTable::ThButtonTooltip @tooltip={{@tooltip}} @labelId={{this._labelId}} />\\n    {{/if}}\\n    <Hds::AdvancedTable::ThButtonSort @sortOrder={{@sortOrder}} @onClick={{@onClickSort}} @labelId={{this._labelId}} />\\n  </div>\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { guidFor } from '@ember/object/internals';\nimport { assert } from '@ember/debug';\nimport { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\nimport { focusable, type FocusableElement } from 'tabbable';\n\nimport {\n  HdsAdvancedTableHorizontalAlignmentValues,\n  HdsAdvancedTableThSortOrderValues,\n  HdsAdvancedTableThSortOrderLabelValues,\n} from './types.ts';\nimport type {\n  HdsAdvancedTableHorizontalAlignment,\n  HdsAdvancedTableThSortOrder,\n  HdsAdvancedTableThSortOrderLabels,\n} from './types.ts';\nimport type { HdsAdvancedTableThButtonSortSignature } from './th-button-sort.ts';\nimport {\n  didInsertGridCell,\n  handleGridCellKeyPress,\n  onFocusTrapDeactivate,\n  updateTabbableChildren,\n} from './helpers.ts';\n\nexport const ALIGNMENTS: string[] = Object.values(\n  HdsAdvancedTableHorizontalAlignmentValues\n);\nexport const DEFAULT_ALIGN = HdsAdvancedTableHorizontalAlignmentValues.Left;\n\nexport interface HdsAdvancedTableThSortSignature {\n  Args: {\n    align?: HdsAdvancedTableHorizontalAlignment;\n    onClickSort?: HdsAdvancedTableThButtonSortSignature['Args']['onClick'];\n    sortOrder?: HdsAdvancedTableThSortOrder;\n    tooltip?: string;\n    rowspan?: number;\n    colspan?: number;\n  };\n  Blocks: {\n    default?: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAdvancedTableThSort extends Component<HdsAdvancedTableThSortSignature> {\n  private _labelId = guidFor(this);\n  private _element!: HTMLDivElement;\n  @tracked private _shouldTrapFocus = false;\n  private _observer: MutationObserver | undefined = undefined;\n\n  get ariaSort(): HdsAdvancedTableThSortOrderLabels {\n    switch (this.args.sortOrder) {\n      case HdsAdvancedTableThSortOrderValues.Asc:\n        return HdsAdvancedTableThSortOrderLabelValues.Asc;\n      case HdsAdvancedTableThSortOrderValues.Desc:\n        return HdsAdvancedTableThSortOrderLabelValues.Desc;\n      default:\n        // none is the default per the spec.\n        return HdsAdvancedTableThSortOrderLabelValues.None;\n    }\n  }\n\n  get align(): HdsAdvancedTableHorizontalAlignment {\n    const { align = DEFAULT_ALIGN } = this.args;\n\n    assert(\n      `@align for \"Hds::Table\" must be one of the following: ${ALIGNMENTS.join(\n        ', '\n      )}; received: ${align}`,\n      ALIGNMENTS.includes(align)\n    );\n    return align;\n  }\n\n  get classNames(): string {\n    const classes = ['hds-advanced-table__th', 'hds-advanced-table__th--sort'];\n\n    // add a class based on the @align argument\n    if (this.align) {\n      classes.push(`hds-advanced-table__th--align-${this.align}`);\n    }\n\n    return classes.join(' ');\n  }\n\n  @action onFocusTrapDeactivate(): void {\n    this._shouldTrapFocus = false;\n    onFocusTrapDeactivate(this._element);\n  }\n\n  @action enableFocusTrap(): void {\n    this._shouldTrapFocus = true;\n  }\n\n  @action getInitialFocus(): FocusableElement | undefined {\n    const cellFocusableElements = focusable(this._element);\n    return cellFocusableElements[0];\n  }\n\n  @action\n  didInsert(element: HTMLDivElement): void {\n    this._element = element;\n    didInsertGridCell(element);\n    element.addEventListener('keydown', (event: KeyboardEvent) => {\n      handleGridCellKeyPress(event, this.enableFocusTrap);\n    });\n\n    this._observer = new MutationObserver(() => {\n      updateTabbableChildren(this._element, this._shouldTrapFocus);\n    });\n\n    this._observer.observe(this._element, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  @action willDestroy() {\n    super.willDestroy();\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n  }\n}\n"],"names":["ALIGNMENTS","Object","values","HdsAdvancedTableHorizontalAlignmentValues","DEFAULT_ALIGN","Left","HdsAdvancedTableThSort","_class","Component","constructor","args","_defineProperty","guidFor","_initializerDefineProperty","_descriptor","undefined","ariaSort","sortOrder","HdsAdvancedTableThSortOrderValues","Asc","HdsAdvancedTableThSortOrderLabelValues","Desc","None","align","assert","join","includes","classNames","classes","push","onFocusTrapDeactivate","_shouldTrapFocus","_element","enableFocusTrap","getInitialFocus","cellFocusableElements","focusable","didInsert","element","didInsertGridCell","addEventListener","event","handleGridCellKeyPress","_observer","MutationObserver","updateTabbableChildren","observe","childList","subtree","willDestroy","disconnect","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}