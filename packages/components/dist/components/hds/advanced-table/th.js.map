{"version":3,"file":"th.js","sources":["../../../../src/components/hds/advanced-table/th.hbs","../../../../src/components/hds/advanced-table/th.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div\\n  class={{this.classNames}}\\n  role={{this.role}}\\n  aria-rowspan={{@rowspan}}\\n  aria-colspan={{@colspan}}\\n  aria-describedby={{@parentId}}\\n  {{style grid-row=this.rowspan grid-column=this.colspan padding-left=this.paddingLeft}}\\n  {{hds-advanced-table-cell\\n    handleEnableFocusTrap=this.enableFocusTrap\\n    shouldTrapFocus=this._shouldTrapFocus\\n    setCellElement=this.setElement\\n  }}\\n  {{! @glint-expect-error - https://github.com/josemarluedke/ember-focus-trap/issues/86 }}\\n  {{focus-trap\\n    isActive=this._shouldTrapFocus\\n    focusTrapOptions=(hash\\n      onDeactivate=this.onFocusTrapDeactivate initialFocus=this.getInitialFocus clickOutsideDeactivates=true\\n    )\\n  }}\\n  ...attributes\\n>\\n  {{#if @isVisuallyHidden}}\\n    <span class=\\\"sr-only\\\">{{yield}}</span>\\n  {{else}}\\n    {{#if @tooltip}}\\n      <div class=\\\"hds-advanced-table__th-content\\\">\\n        {{#if @isExpandable}}\\n          <Hds::AdvancedTable::ThButtonExpand\\n            @labelId={{this._labelId}}\\n            @onToggle={{@onClickToggle}}\\n            @isExpanded={{@isExpanded}}\\n          />\\n        {{/if}}\\n        <span id={{this._labelId}} class=\\\"hds-typography-body-200 hds-font-weight-semibold\\\">{{yield}}</span>\\n        <Hds::AdvancedTable::ThButtonTooltip @tooltip={{@tooltip}} @labelId={{this._labelId}} />\\n      </div>\\n    {{else}}\\n      <div class=\\\"hds-advanced-table__th-content\\\">\\n        {{#if @isExpandable}}\\n          <Hds::AdvancedTable::ThButtonExpand\\n            @labelId={{this._labelId}}\\n            @onToggle={{@onClickToggle}}\\n            @isExpanded={{@isExpanded}}\\n          />\\n        {{/if}}\\n        <span class=\\\"hds-typography-body-200 hds-font-weight-semibold\\\" id={{this._labelId}}>{{yield}}</span>\\n      </div>\\n    {{/if}}\\n  {{/if}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { guidFor } from '@ember/object/internals';\nimport { assert } from '@ember/debug';\nimport { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\nimport { focusable, type FocusableElement } from 'tabbable';\n\nimport type {\n  HdsAdvancedTableHorizontalAlignment,\n  HdsAdvancedTableScope,\n} from './types.ts';\nimport { HdsAdvancedTableHorizontalAlignmentValues } from './types.ts';\nimport { onFocusTrapDeactivate } from '../../../modifiers/hds-advanced-table-cell/dom-management.ts';\n\nexport const ALIGNMENTS: string[] = Object.values(\n  HdsAdvancedTableHorizontalAlignmentValues\n);\nexport const DEFAULT_ALIGN = HdsAdvancedTableHorizontalAlignmentValues.Left;\n\nexport interface HdsAdvancedTableThSignature {\n  Args: {\n    align?: HdsAdvancedTableHorizontalAlignment;\n    isVisuallyHidden?: boolean;\n    scope?: HdsAdvancedTableScope;\n    tooltip?: string;\n    rowspan?: number;\n    colspan?: number;\n    newLabel?: string;\n    isExpandable?: boolean;\n    parentId?: string;\n    onClickToggle?: () => void;\n    isExpanded?: boolean;\n    depth?: number;\n  };\n  Blocks: {\n    default?: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAdvancedTableTh extends Component<HdsAdvancedTableThSignature> {\n  private _labelId = this.args.newLabel ? this.args.newLabel : guidFor(this);\n  private _element!: HTMLDivElement;\n  @tracked private _shouldTrapFocus = false;\n\n  get scope(): HdsAdvancedTableScope {\n    const { scope = 'col' } = this.args;\n    return scope;\n  }\n\n  get role(): string {\n    if (this.scope === 'col') return 'columnheader';\n    else return 'rowheader';\n  }\n\n  get align(): HdsAdvancedTableHorizontalAlignment {\n    const { align = DEFAULT_ALIGN } = this.args;\n\n    assert(\n      `@align for \"Hds::Table::Th\" must be one of the following: ${ALIGNMENTS.join(\n        ', '\n      )}; received: ${align}`,\n      ALIGNMENTS.includes(align)\n    );\n    return align;\n  }\n\n  // rowspan and colspan have to return 'auto' if not defined because otherwise the style modifier sets grid-area: undefined on the cell, which breaks the grid styles\n  get rowspan(): string {\n    if (this.args.rowspan) {\n      return `span ${this.args.rowspan}`;\n    }\n    return 'auto';\n  }\n\n  get colspan(): string | undefined {\n    if (this.args.colspan) {\n      return `span ${this.args.colspan}`;\n    }\n    return 'auto';\n  }\n\n  get paddingLeft(): string | undefined {\n    if (this.args.depth) {\n      return `calc(${this.args.depth} * 32px + 16px)`;\n    }\n  }\n\n  get classNames(): string {\n    const classes = ['hds-advanced-table__th'];\n\n    // add a class based on the @align argument\n    if (this.align) {\n      classes.push(`hds-advanced-table__th--align-${this.align}`);\n    }\n\n    return classes.join(' ');\n  }\n\n  @action onFocusTrapDeactivate(): void {\n    this._shouldTrapFocus = false;\n    onFocusTrapDeactivate(this._element);\n  }\n\n  @action enableFocusTrap(): void {\n    this._shouldTrapFocus = true;\n  }\n\n  @action getInitialFocus(): FocusableElement | undefined {\n    const cellFocusableElements = focusable(this._element);\n    return cellFocusableElements[0];\n  }\n\n  @action setElement(element: HTMLDivElement): void {\n    this._element = element;\n  }\n}\n"],"names":["ALIGNMENTS","Object","values","HdsAdvancedTableHorizontalAlignmentValues","DEFAULT_ALIGN","Left","HdsAdvancedTableTh","_class","Component","constructor","args","_defineProperty","newLabel","guidFor","_initializerDefineProperty","_descriptor","scope","role","align","assert","join","includes","rowspan","colspan","paddingLeft","depth","classNames","classes","push","onFocusTrapDeactivate","_shouldTrapFocus","_element","enableFocusTrap","getInitialFocus","cellFocusableElements","focusable","setElement","element","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}