{"version":3,"file":"expandable-tr-group.js","sources":["../../../../src/components/hds/advanced-table/expandable-tr-group.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\nimport Component from '@glimmer/component';\nimport { guidFor } from '@ember/object/internals';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\n\nimport type { HdsAdvancedTableHorizontalAlignment } from './types.ts';\nimport type Owner from '@ember/owner';\nexport interface HdsAdvancedTableExpandableTrGroupSignature {\n  Args: {\n    align?: HdsAdvancedTableHorizontalAlignment;\n    depth?: number;\n    record: Record<string, unknown>;\n    parentId?: string;\n    childrenKey?: string;\n    rowIndex: number | string;\n  };\n  Blocks: {\n    default?: [\n      {\n        data: Record<string, unknown>;\n        isExpandable: boolean;\n        id?: string;\n        parentId?: string;\n        depth: number;\n        onClickToggle?: () => void;\n        isExpanded?: boolean;\n        rowIndex?: string;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAdvancedTableExpandableTrGroup extends Component<HdsAdvancedTableExpandableTrGroupSignature> {\n  @tracked private _isExpanded = false;\n\n  private _id = guidFor(this);\n\n  constructor(\n    owner: Owner,\n    args: HdsAdvancedTableExpandableTrGroupSignature['Args']\n  ) {\n    super(owner, args);\n\n    this._isExpanded =\n      this.args.record['isOpen'] &&\n      typeof this.args.record['isOpen'] === 'boolean'\n        ? this.args.record['isOpen']\n        : false;\n  }\n\n  get childrenKey(): string {\n    const { childrenKey = 'children' } = this.args;\n\n    return childrenKey;\n  }\n\n  get children(): Array<Record<string, unknown>> | undefined {\n    const { record } = this.args;\n\n    if (record[this.childrenKey]) {\n      const children = record[this.childrenKey];\n\n      if (Array.isArray(children)) {\n        return children;\n      }\n    }\n    return undefined;\n  }\n\n  get hasChildren(): boolean {\n    if (!this.children) return false;\n    return true;\n  }\n\n  get depth(): number {\n    const { depth = 0 } = this.args;\n\n    return depth;\n  }\n\n  get rowIndex(): string {\n    const { rowIndex } = this.args;\n    return `${rowIndex}`;\n  }\n\n  get childrenDepth(): number {\n    return this.depth + 1;\n  }\n\n  @action onClickToggle() {\n    this._isExpanded = !this._isExpanded;\n  }\n}\n"],"names":["HdsAdvancedTableExpandableTrGroup","Component","g","prototype","tracked","i","void 0","_id","guidFor","constructor","owner","args","_isExpanded","record","childrenKey","children","Array","isArray","undefined","hasChildren","depth","rowIndex","childrenDepth","onClickToggle","n","action","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AAkCe,MAAMA,iCAAiC,SAASC,SAAS,CAA6C;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,aAAA,EAAA,CAClHC,OAAO,CAAA,EAAA,YAAA;AAAA,MAAA,OAAuB,KAAK;AAAA,KAAA,CAAA;AAAA;AAAA,EAAA,YAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,aAAA,CAAA,EAAAC,SAAA;AAE5BC,EAAAA,GAAG,GAAGC,OAAO,CAAC,IAAI,CAAC;AAE3BC,EAAAA,WAAWA,CACTC,KAAY,EACZC,IAAwD,EACxD;AACA,IAAA,KAAK,CAACD,KAAK,EAAEC,IAAI,CAAC;AAElB,IAAA,IAAI,CAACC,WAAW,GACd,IAAI,CAACD,IAAI,CAACE,MAAM,CAAC,QAAQ,CAAC,IAC1B,OAAO,IAAI,CAACF,IAAI,CAACE,MAAM,CAAC,QAAQ,CAAC,KAAK,SAAS,GAC3C,IAAI,CAACF,IAAI,CAACE,MAAM,CAAC,QAAQ,CAAC,GAC1B,KAAK;AACb;EAEA,IAAIC,WAAWA,GAAW;IACxB,MAAM;AAAEA,MAAAA,WAAW,GAAG;KAAY,GAAG,IAAI,CAACH,IAAI;AAE9C,IAAA,OAAOG,WAAW;AACpB;EAEA,IAAIC,QAAQA,GAA+C;IACzD,MAAM;AAAEF,MAAAA;KAAQ,GAAG,IAAI,CAACF,IAAI;AAE5B,IAAA,IAAIE,MAAM,CAAC,IAAI,CAACC,WAAW,CAAC,EAAE;AAC5B,MAAA,MAAMC,QAAQ,GAAGF,MAAM,CAAC,IAAI,CAACC,WAAW,CAAC;AAEzC,MAAA,IAAIE,KAAK,CAACC,OAAO,CAACF,QAAQ,CAAC,EAAE;AAC3B,QAAA,OAAOA,QAAQ;AACjB;AACF;AACA,IAAA,OAAOG,SAAS;AAClB;EAEA,IAAIC,WAAWA,GAAY;AACzB,IAAA,IAAI,CAAC,IAAI,CAACJ,QAAQ,EAAE,OAAO,KAAK;AAChC,IAAA,OAAO,IAAI;AACb;EAEA,IAAIK,KAAKA,GAAW;IAClB,MAAM;AAAEA,MAAAA,KAAK,GAAG;KAAG,GAAG,IAAI,CAACT,IAAI;AAE/B,IAAA,OAAOS,KAAK;AACd;EAEA,IAAIC,QAAQA,GAAW;IACrB,MAAM;AAAEA,MAAAA;KAAU,GAAG,IAAI,CAACV,IAAI;IAC9B,OAAO,CAAA,EAAGU,QAAQ,CAAE,CAAA;AACtB;EAEA,IAAIC,aAAaA,GAAW;AAC1B,IAAA,OAAO,IAAI,CAACF,KAAK,GAAG,CAAC;AACvB;AAEQG,EAAAA,aAAaA,GAAG;AACtB,IAAA,IAAI,CAACX,WAAW,GAAG,CAAC,IAAI,CAACA,WAAW;AACtC;AAAC,EAAA;IAAAY,CAAA,CAAA,IAAA,CAAArB,SAAA,EAAA,eAAA,EAAA,CAFAsB,MAAM,CAAA,CAAA;AAAA;AAGT;AAACC,oBAAA,CAAAC,QAAA,EA5DoB3B,iCAAiC,CAAA;;;;"}