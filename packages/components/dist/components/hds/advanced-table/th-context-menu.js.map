{"version":3,"file":"th-context-menu.js","sources":["../../../../src/components/hds/advanced-table/th-context-menu.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\n\nimport type HdsAdvancedTableColumn from './models/column.ts';\nimport type { HdsDropdownSignature } from '../dropdown/index.ts';\nimport type { HdsDropdownToggleIconSignature } from '../dropdown/toggle/icon.ts';\nimport type { HdsAdvancedTableSignature } from './index.ts';\nimport { tracked } from '@glimmer/tracking';\nimport type { HdsAdvancedTableThResizeHandleSignature } from './th-resize-handle.ts';\n\ninterface HdsAdvancedTableThContextMenuOption {\n  key: string;\n  label: string;\n  icon: HdsDropdownToggleIconSignature['Args']['icon'];\n  action: (\n    column: HdsAdvancedTableColumn,\n    dropdownCloseCallback?: () => void\n  ) => void;\n}\n\nexport interface HdsAdvancedTableThContextMenuSignature {\n  Args: {\n    column: HdsAdvancedTableColumn;\n    hasResizableColumns?: boolean;\n    resizeHandleElement?: HdsAdvancedTableThResizeHandleSignature['Element'];\n    onColumnResize?: HdsAdvancedTableSignature['Args']['onColumnResize'];\n  };\n  Element: HdsDropdownSignature['Element'];\n}\n\nexport default class HdsAdvancedTableThContextMenu extends Component<HdsAdvancedTableThContextMenuSignature> {\n  @tracked private _element!: HdsDropdownSignature['Element'];\n\n  get _options(): HdsAdvancedTableThContextMenuOption[] {\n    const { column, hasResizableColumns } = this.args;\n\n    let options: HdsAdvancedTableThContextMenuOption[] = [];\n\n    if (hasResizableColumns) {\n      if (!column.isLast) {\n        options = [\n          ...options,\n          {\n            key: 'resize-column',\n            label: 'Resize column',\n            icon: 'resize-column',\n            action: this.resizeColumn.bind(this),\n          },\n        ];\n      }\n\n      options = [\n        ...options,\n        {\n          key: 'reset-column-width',\n          label: 'Reset column width',\n          icon: 'rotate-ccw',\n          action: this.resetColumnWidth.bind(this),\n        },\n      ];\n    }\n\n    return options;\n  }\n\n  @action\n  resizeColumn() {\n    this.args.resizeHandleElement?.focus();\n  }\n\n  @action\n  resetColumnWidth(\n    column: HdsAdvancedTableColumn,\n    dropdownCloseCallback?: () => void\n  ): void {\n    const { onColumnResize } = this.args;\n\n    const { previous: previousColumn, next: nextColumn } = column.siblings;\n\n    previousColumn?.onNextColumnWidthRestored(column.imposedWidthDelta);\n    nextColumn?.onPreviousColumnWidthRestored();\n    column.restoreWidth();\n\n    if (typeof onColumnResize === 'function' && column.key !== undefined) {\n      onColumnResize(column.key, column.width);\n    }\n\n    dropdownCloseCallback?.();\n  }\n}\n"],"names":["HdsAdvancedTableThContextMenu","Component","g","prototype","tracked","i","void 0","_options","column","hasResizableColumns","args","options","isLast","key","label","icon","action","resizeColumn","bind","resetColumnWidth","resizeHandleElement","focus","n","dropdownCloseCallback","onColumnResize","previous","previousColumn","next","nextColumn","siblings","onNextColumnWidthRestored","imposedWidthDelta","onPreviousColumnWidthRestored","restoreWidth","undefined","width","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;;AAgCe,MAAMA,6BAA6B,SAASC,SAAS,CAAyC;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,UAAA,EAAA,CAC1GC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,SAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,UAAA,CAAA,EAAAC,MAAA;EAER,IAAIC,QAAQA,GAA0C;IACpD,MAAM;MAAEC,MAAM;AAAEC,MAAAA;KAAqB,GAAG,IAAI,CAACC,IAAI;IAEjD,IAAIC,OAA8C,GAAG,EAAE;AAEvD,IAAA,IAAIF,mBAAmB,EAAE;AACvB,MAAA,IAAI,CAACD,MAAM,CAACI,MAAM,EAAE;AAClBD,QAAAA,OAAO,GAAG,CACR,GAAGA,OAAO,EACV;AACEE,UAAAA,GAAG,EAAE,eAAe;AACpBC,UAAAA,KAAK,EAAE,eAAe;AACtBC,UAAAA,IAAI,EAAE,eAAe;AACrBC,UAAAA,MAAM,EAAE,IAAI,CAACC,YAAY,CAACC,IAAI,CAAC,IAAI;AACrC,SAAC,CACF;AACH;AAEAP,MAAAA,OAAO,GAAG,CACR,GAAGA,OAAO,EACV;AACEE,QAAAA,GAAG,EAAE,oBAAoB;AACzBC,QAAAA,KAAK,EAAE,oBAAoB;AAC3BC,QAAAA,IAAI,EAAE,YAAY;AAClBC,QAAAA,MAAM,EAAE,IAAI,CAACG,gBAAgB,CAACD,IAAI,CAAC,IAAI;AACzC,OAAC,CACF;AACH;AAEA,IAAA,OAAOP,OAAO;AAChB;AAGAM,EAAAA,YAAYA,GAAG;AACb,IAAA,IAAI,CAACP,IAAI,CAACU,mBAAmB,EAAEC,KAAK,EAAE;AACxC;AAAC,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,cAAA,EAAA,CAHAa,MAAM,CAAA,CAAA;AAAA;AAMPG,EAAAA,gBAAgBA,CACdX,MAA8B,EAC9Be,qBAAkC,EAC5B;IACN,MAAM;AAAEC,MAAAA;KAAgB,GAAG,IAAI,CAACd,IAAI;IAEpC,MAAM;AAAEe,MAAAA,QAAQ,EAAEC,cAAc;AAAEC,MAAAA,IAAI,EAAEC;KAAY,GAAGpB,MAAM,CAACqB,QAAQ;AAEtEH,IAAAA,cAAc,EAAEI,yBAAyB,CAACtB,MAAM,CAACuB,iBAAiB,CAAC;IACnEH,UAAU,EAAEI,6BAA6B,EAAE;IAC3CxB,MAAM,CAACyB,YAAY,EAAE;IAErB,IAAI,OAAOT,cAAc,KAAK,UAAU,IAAIhB,MAAM,CAACK,GAAG,KAAKqB,SAAS,EAAE;MACpEV,cAAc,CAAChB,MAAM,CAACK,GAAG,EAAEL,MAAM,CAAC2B,KAAK,CAAC;AAC1C;AAEAZ,IAAAA,qBAAqB,IAAI;AAC3B;AAAC,EAAA;IAAAD,CAAA,CAAA,IAAA,CAAAnB,SAAA,EAAA,kBAAA,EAAA,CAlBAa,MAAM,CAAA,CAAA;AAAA;AAmBT;AAACoB,oBAAA,CAAAC,QAAA,EA3DoBrC,6BAA6B,CAAA;;;;"}