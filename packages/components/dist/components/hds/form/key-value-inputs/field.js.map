{"version":3,"file":"field.js","sources":["../../../../../src/components/hds/form/key-value-inputs/field.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport type { WithBoundArgs } from '@glint/template';\nimport { action } from '@ember/object';\nimport { modifier } from 'ember-modifier';\n\nimport {\n  ariaDescribedBy,\n  registerAriaDescriptionElement,\n  unregisterAriaDescriptionElement,\n} from '../../../../utils/hds-aria-described-by.ts';\nimport { getElementId } from '../../../../utils/hds-get-element-id.ts';\nimport HdsFormErrorComponent from '../error/index.ts';\nimport HdsFormFileInputBaseComponent from '../file-input/base.ts';\nimport HdsFormHelperTextComponent from '../helper-text/index.ts';\nimport HdsFormLabelComponent, {\n  ID_PREFIX as LABEL_ID_PREFIX,\n} from '../label/index.ts';\nimport HdsFormMaskedInputBaseComponent from '../masked-input/base.ts';\nimport HdsFormSelectBaseComponent from '../select/base.ts';\nimport HdsFormSuperSelectMultipleBaseComponent from '../super-select/multiple/base.ts';\nimport HdsFormSuperSelectSingleBaseComponent from '../super-select/single/base.ts';\nimport HdsFormTextareaBaseComponent from '../textarea/base.ts';\nimport HdsFormTextInputBaseComponent from '../text-input/base.ts';\n\nimport type { AriaDescribedByComponent } from '../../../../utils/hds-aria-described-by.ts';\n\nexport interface HdsFormKeyValueInputsFieldSignature {\n  Args: {\n    extraAriaDescribedBy?: string;\n    id?: string;\n    isInvalid?: boolean;\n    isOptional?: boolean;\n    isRequired?: boolean;\n    onInsert?: () => void;\n    onRemove?: () => void;\n    rowIndex: number;\n    width?: string;\n  };\n  Blocks: {\n    default?: [\n      {\n        Label?: WithBoundArgs<\n          typeof HdsFormLabelComponent,\n          | 'contextualClass'\n          | 'controlId'\n          | 'hiddenText'\n          | 'isOptional'\n          | 'isRequired'\n        >;\n        HelperText?: WithBoundArgs<\n          typeof HdsFormHelperTextComponent,\n          'contextualClass' | 'controlId' | 'onInsert'\n        >;\n        FileInput?: WithBoundArgs<\n          typeof HdsFormFileInputBaseComponent,\n          'ariaDescribedBy' | 'id'\n        >;\n        MaskedInput?: WithBoundArgs<\n          typeof HdsFormMaskedInputBaseComponent,\n          'ariaDescribedBy' | 'id' | 'isInvalid'\n        >;\n        Select?: WithBoundArgs<\n          typeof HdsFormSelectBaseComponent,\n          'ariaDescribedBy' | 'id' | 'isInvalid'\n        >;\n        SuperSelectSingle?: WithBoundArgs<\n          typeof HdsFormSuperSelectSingleBaseComponent,\n          'ariaDescribedBy' | 'ariaLabelledBy' | 'isInvalid' | 'triggerId'\n        >;\n        SuperSelectMultiple?: WithBoundArgs<\n          typeof HdsFormSuperSelectMultipleBaseComponent,\n          'ariaDescribedBy' | 'ariaLabelledBy' | 'isInvalid' | 'triggerId'\n        >;\n        TextInput?: WithBoundArgs<\n          typeof HdsFormTextInputBaseComponent,\n          'ariaDescribedBy' | 'id' | 'isInvalid'\n        >;\n        Textarea?: WithBoundArgs<\n          typeof HdsFormTextareaBaseComponent,\n          'ariaDescribedBy' | 'id' | 'isInvalid'\n        >;\n        Error?: WithBoundArgs<\n          typeof HdsFormErrorComponent,\n          'contextualClass' | 'controlId' | 'onInsert' | 'onRemove'\n        >;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\n// @ts-expect-error: decorator function return type 'ClassOf<AriaDescribedBy>' is not assignable to 'typeof HdsFormField'\n@ariaDescribedBy\nexport default class HdsFormKeyValueInputsField extends Component<HdsFormKeyValueInputsFieldSignature> {\n  private _onInsert = modifier(() => {\n    if (this.args.onInsert) {\n      this.args.onInsert();\n    }\n\n    return () => {\n      if (this.args.onRemove) {\n        this.args.onRemove();\n      }\n    };\n  });\n\n  get id(): string {\n    return getElementId(this);\n  }\n\n  get labelHiddenText(): string {\n    return `row ${this.args.rowIndex + 1}`;\n  }\n\n  get labelIdPrefix(): string {\n    return LABEL_ID_PREFIX;\n  }\n\n  @action\n  appendDescriptor(element: HTMLElement): void {\n    registerAriaDescriptionElement(this as AriaDescribedByComponent, element);\n  }\n\n  @action\n  removeDescriptor(element: HTMLElement): void {\n    unregisterAriaDescriptionElement(this as AriaDescribedByComponent, element);\n  }\n}\n"],"names":["HdsFormKeyValueInputsField","c","Component","_onInsert","modifier","args","onInsert","onRemove","id","getElementId","labelHiddenText","rowIndex","labelIdPrefix","LABEL_ID_PREFIX","appendDescriptor","element","registerAriaDescriptionElement","n","prototype","action","removeDescriptor","unregisterAriaDescriptionElement","ariaDescribedBy","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAwBkE,MAuE7CA,0BAA0B,GAAAC,CAAA,OAA1BD,0BAA0B,SAASE,SAAS,CAAsC;EAC7FC,SAAS,GAAGC,QAAQ,CAAC,MAAM;AACjC,IAAA,IAAI,IAAI,CAACC,IAAI,CAACC,QAAQ,EAAE;AACtB,MAAA,IAAI,CAACD,IAAI,CAACC,QAAQ,EAAE;AACtB;AAEA,IAAA,OAAO,MAAM;AACX,MAAA,IAAI,IAAI,CAACD,IAAI,CAACE,QAAQ,EAAE;AACtB,QAAA,IAAI,CAACF,IAAI,CAACE,QAAQ,EAAE;AACtB;KACD;AACH,GAAC,CAAC;EAEF,IAAIC,EAAEA,GAAW;IACf,OAAOC,YAAY,CAAC,IAAI,CAAC;AAC3B;EAEA,IAAIC,eAAeA,GAAW;IAC5B,OAAO,CAAA,IAAA,EAAO,IAAI,CAACL,IAAI,CAACM,QAAQ,GAAG,CAAC,CAAE,CAAA;AACxC;EAEA,IAAIC,aAAaA,GAAW;AAC1B,IAAA,OAAOC,SAAe;AACxB;EAGAC,gBAAgBA,CAACC,OAAoB,EAAQ;AAC3CC,IAAAA,8BAA8B,CAAC,IAAI,EAA8BD,OAAO,CAAC;AAC3E;AAAC,EAAA;IAAAE,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,kBAAA,EAAA,CAHAC,MAAM,CAAA,CAAA;AAAA;EAMPC,gBAAgBA,CAACL,OAAoB,EAAQ;AAC3CM,IAAAA,gCAAgC,CAAC,IAAI,EAA8BN,OAAO,CAAC;AAC7E;AAAC,EAAA;IAAAE,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,kBAAA,EAAA,CAHAC,MAAM,CAAA,CAAA;AAAA;AAIT,CAAC,GAnCAG,eAAe,CAAA;AAC+BC,oBAAA,CAAAC,QAAA,EAA1BxB,0BAA0B,CAAA;;;;"}