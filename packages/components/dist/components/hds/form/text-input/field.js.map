{"version":3,"file":"field.js","sources":["../../../../../src/components/hds/form/text-input/field.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\nimport { action } from '@ember/object';\n\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\nimport type { HdsFormFieldSignature } from '../field';\nimport type { HdsFormTextInputBaseSignature } from './base';\nimport type { HdsFormErrorSignature } from '../error';\nimport type { HdsFormHelperTextSignature } from '../helper-text';\nimport type { HdsFormLabelSignature } from '../label';\nimport type { HdsFormVisibilityToggleSignature } from '../visibility-toggle';\nimport HdsFormCharacterCountComponent from '../character-count/index.ts';\nimport type Owner from '@ember/owner';\n\nexport interface HdsFormTextInputFieldSignature {\n  Args: Omit<HdsFormFieldSignature['Args'], 'contextualClass' | 'layout'> &\n    HdsFormTextInputBaseSignature['Args'] & {\n      visibilityToggleAriaLabel?: HdsFormVisibilityToggleSignature['Args']['ariaLabel'];\n      visibilityToggleAriaMessageText?: HdsFormVisibilityToggleSignature['Args']['ariaMessageText'];\n    };\n  Blocks: {\n    default: [\n      {\n        Label?: ComponentLike<HdsFormLabelSignature>;\n        HelperText?: ComponentLike<HdsFormHelperTextSignature>;\n        Error?: ComponentLike<HdsFormErrorSignature>;\n        CharacterCount?: WithBoundArgs<\n          typeof HdsFormCharacterCountComponent,\n          'value'\n        >;\n      },\n    ];\n  };\n  Element: HdsFormFieldSignature['Element'];\n}\n\nexport default class HdsFormTextInputField extends Component<HdsFormTextInputFieldSignature> {\n  @tracked private _isPasswordMasked = true;\n  @tracked type;\n\n  constructor(owner: Owner, args: HdsFormTextInputFieldSignature['Args']) {\n    super(owner, args);\n    this.type = this.args.type ?? 'text';\n  }\n\n  get hasVisibilityToggle(): boolean {\n    return this.args.hasVisibilityToggle ?? true;\n  }\n\n  get showVisibilityToggle(): boolean {\n    return this.args.type === 'password' && this.hasVisibilityToggle;\n  }\n\n  get visibilityToggleAriaLabel(): string | undefined {\n    if (this.args.visibilityToggleAriaLabel) {\n      return this.args.visibilityToggleAriaLabel;\n    } else if (this._isPasswordMasked) {\n      return 'Show password';\n    } else {\n      return 'Hide password';\n    }\n  }\n\n  get visibilityToggleAriaMessageText(): string | undefined {\n    if (this.args.visibilityToggleAriaMessageText) {\n      return this.args.visibilityToggleAriaMessageText;\n    } else if (this._isPasswordMasked) {\n      return 'Password is hidden';\n    } else {\n      return 'Password is visible';\n    }\n  }\n\n  @action\n  onClickTogglePasswordReadability(): void {\n    this._isPasswordMasked = !this._isPasswordMasked;\n    this.type = this._isPasswordMasked ? 'password' : 'text';\n  }\n}\n"],"names":["HdsFormTextInputField","Component","g","prototype","tracked","i","void 0","constructor","owner","args","type","hasVisibilityToggle","showVisibilityToggle","visibilityToggleAriaLabel","_isPasswordMasked","visibilityToggleAriaMessageText","onClickTogglePasswordReadability","n","action","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;;AAsCe,MAAMA,qBAAqB,SAASC,SAAS,CAAiC;AAAA,EAAA;IAAAC,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,mBAAA,EAAA,CAC1FC,OAAO,CAAA,EAAA,YAAA;AAAA,MAAA,OAA6B,IAAI;AAAA,KAAA,CAAA;AAAA;AAAA,EAAA,kBAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,mBAAA,CAAA,EAAAC,MAAA;AAAA,EAAA;IAAAJ,CAAA,CAAA,IAAA,CAAAC,SAAA,EAAA,MAAA,EAAA,CACxCC,OAAO,CAAA,CAAA;AAAA;AAAA,EAAA,KAAA,IAAAC,CAAA,CAAA,IAAA,EAAA,MAAA,CAAA,EAAAC,MAAA;AAERC,EAAAA,WAAWA,CAACC,KAAY,EAAEC,IAA4C,EAAE;AACtE,IAAA,KAAK,CAACD,KAAK,EAAEC,IAAI,CAAC;IAClB,IAAI,CAACC,IAAI,GAAG,IAAI,CAACD,IAAI,CAACC,IAAI,IAAI,MAAM;AACtC;EAEA,IAAIC,mBAAmBA,GAAY;AACjC,IAAA,OAAO,IAAI,CAACF,IAAI,CAACE,mBAAmB,IAAI,IAAI;AAC9C;EAEA,IAAIC,oBAAoBA,GAAY;IAClC,OAAO,IAAI,CAACH,IAAI,CAACC,IAAI,KAAK,UAAU,IAAI,IAAI,CAACC,mBAAmB;AAClE;EAEA,IAAIE,yBAAyBA,GAAuB;AAClD,IAAA,IAAI,IAAI,CAACJ,IAAI,CAACI,yBAAyB,EAAE;AACvC,MAAA,OAAO,IAAI,CAACJ,IAAI,CAACI,yBAAyB;AAC5C,KAAC,MAAM,IAAI,IAAI,CAACC,iBAAiB,EAAE;AACjC,MAAA,OAAO,eAAe;AACxB,KAAC,MAAM;AACL,MAAA,OAAO,eAAe;AACxB;AACF;EAEA,IAAIC,+BAA+BA,GAAuB;AACxD,IAAA,IAAI,IAAI,CAACN,IAAI,CAACM,+BAA+B,EAAE;AAC7C,MAAA,OAAO,IAAI,CAACN,IAAI,CAACM,+BAA+B;AAClD,KAAC,MAAM,IAAI,IAAI,CAACD,iBAAiB,EAAE;AACjC,MAAA,OAAO,oBAAoB;AAC7B,KAAC,MAAM;AACL,MAAA,OAAO,qBAAqB;AAC9B;AACF;AAGAE,EAAAA,gCAAgCA,GAAS;AACvC,IAAA,IAAI,CAACF,iBAAiB,GAAG,CAAC,IAAI,CAACA,iBAAiB;IAChD,IAAI,CAACJ,IAAI,GAAG,IAAI,CAACI,iBAAiB,GAAG,UAAU,GAAG,MAAM;AAC1D;AAAC,EAAA;IAAAG,CAAA,CAAA,IAAA,CAAAd,SAAA,EAAA,kCAAA,EAAA,CAJAe,MAAM,CAAA,CAAA;AAAA;AAKT;AAACC,oBAAA,CAAAC,QAAA,EA1CoBpB,qBAAqB,CAAA;;;;"}