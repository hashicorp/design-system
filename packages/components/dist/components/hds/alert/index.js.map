{"version":3,"file":"index.js","sources":["../../../../src/components/hds/alert/index.hbs","../../../../src/components/hds/alert/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div\\n  class={{this.classNames}}\\n  role={{this.role}}\\n  aria-live=\\\"polite\\\"\\n  aria-labelledby={{this.ariaLabelledBy}}\\n  {{did-insert this.didInsert}}\\n  ...attributes\\n>\\n  {{#if this.icon}}\\n    <div class=\\\"hds-alert__icon\\\">\\n      <FlightIcon @name={{this.icon}} @size={{this.iconSize}} @stretched={{true}} @isInlineBlock={{false}} />\\n    </div>\\n  {{/if}}\\n\\n  <div class=\\\"hds-alert__content\\\">\\n    <div class=\\\"hds-alert__text {{if (eq @type \\'compact\\') \\'hds-typography-body-100\\' \\'hds-typography-body-200\\'}}\\\">\\n      {{yield (hash Title=(component \\\"hds/alert/title\\\"))}}\\n      {{yield (hash Description=(component \\\"hds/alert/description\\\"))}}\\n    </div>\\n\\n    <div class=\\\"hds-alert__actions\\\">\\n      {{yield\\n        (hash\\n          Button=(component \\\"hds/button\\\" size=\\\"small\\\") LinkStandalone=(component \\\"hds/link/standalone\\\" size=\\\"small\\\")\\n        )\\n      }}\\n    </div>\\n    {{yield (hash Generic=(component \\\"hds/yield\\\"))}}\\n  </div>\\n\\n  {{#if this.onDismiss}}\\n    <Hds::DismissButton class=\\\"hds-alert__dismiss\\\" {{on \\\"click\\\" this.onDismiss}} />\\n  {{/if}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { guidFor } from '@ember/object/internals';\nimport { tracked } from '@glimmer/tracking';\n\nimport { HdsAlertColorValues, HdsAlertTypeValues } from './types.ts';\n\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\nimport type HdsButtonComponent from '../button';\nimport type HdsLinkStandaloneComponent from '../link/standalone';\nimport type { HdsYieldSignature } from '../yield';\nimport type { HdsAlertColors, HdsAlertTypes } from './types.ts';\nimport type { HdsAlertTitleSignature } from './title.ts';\nimport type { HdsAlertDescriptionSignature } from './description.ts';\nimport type { FlightIconSignature } from '@hashicorp/ember-flight-icons/components/flight-icon';\n\nexport const TYPES: string[] = Object.values(HdsAlertTypeValues);\nexport const DEFAULT_COLOR = HdsAlertColorValues.Neutral;\nexport const COLORS: string[] = Object.values(HdsAlertColorValues);\n\nexport const MAPPING_COLORS_TO_ICONS = {\n  [HdsAlertColorValues.Neutral]: 'info',\n  [HdsAlertColorValues.Highlight]: 'info',\n  [HdsAlertColorValues.Success]: 'check-circle',\n  [HdsAlertColorValues.Warning]: 'alert-triangle',\n  [HdsAlertColorValues.Critical]: 'alert-diamond',\n} as const;\n\nconst CONTENT_ELEMENT_SELECTOR = '.hds-alert__content';\nconst TITLE_ELEMENT_SELECTOR = '.hds-alert__title';\nconst DESCRIPTION_ELEMENT_SELECTOR = '.hds-alert__description';\n\nexport interface HdsAlertSignature {\n  Args: {\n    type: HdsAlertTypes;\n    color?: HdsAlertColors;\n    icon?: FlightIconSignature['Args']['name'] | false;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onDismiss?: (event: MouseEvent, ...args: any[]) => void;\n  };\n  Blocks: {\n    default: [\n      {\n        Title?: ComponentLike<HdsAlertTitleSignature>;\n        Description?: ComponentLike<HdsAlertDescriptionSignature>;\n        Generic?: ComponentLike<HdsYieldSignature>;\n        LinkStandalone?: WithBoundArgs<\n          typeof HdsLinkStandaloneComponent,\n          'size'\n        >;\n        Button?: WithBoundArgs<typeof HdsButtonComponent, 'size'>;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAlertComponent extends Component<HdsAlertSignature> {\n  @tracked role = 'alert';\n  @tracked ariaLabelledBy?: string;\n\n  constructor(owner: unknown, args: HdsAlertSignature['Args']) {\n    super(owner, args);\n\n    assert(\n      `@type for \"Hds::Alert\" must be one of the following: ${TYPES.join(\n        ', '\n      )}; received: ${this.args.type}`,\n      TYPES.includes(this.args.type)\n    );\n  }\n\n  /**\n   * @param color\n   * @type {enum}\n   * @default neutral\n   * @description Determines the color scheme for the alert.\n   */\n  get color(): HdsAlertColors {\n    const { color = DEFAULT_COLOR } = this.args;\n\n    assert(\n      `@color for \"Hds::Alert\" must be one of the following: ${COLORS.join(\n        ', '\n      )}; received: ${color}`,\n      COLORS.includes(color)\n    );\n\n    return color;\n  }\n\n  /**\n   * @param icon\n   * @type {string}\n   * @default false\n   * @description The name of the icon to be used.\n   */\n  get icon(): FlightIconSignature['Args']['name'] | false {\n    const { icon } = this.args;\n\n    // If `icon` isn't passed, use the pre-defined one from `color`\n    if (icon === undefined) {\n      if (this.args.type === 'compact') {\n        // for the \"compact\" type by default we use filled icons\n        return `${MAPPING_COLORS_TO_ICONS[this.color]}-fill`;\n      } else {\n        // for all the other types by default we use outlined icons\n        return MAPPING_COLORS_TO_ICONS[this.color];\n      }\n      // If `icon` is set explicitly to false, user doesn't want any icon in the alert\n    } else if (icon === false) {\n      assert(\n        `@icon for \"Hds::Alert\" with @type \"compact\" is required`,\n        this.args.type !== 'compact'\n      );\n\n      return false;\n    } else {\n      // If a name for `icon` is passed, set FlightIcon to that name\n      return icon;\n    }\n  }\n\n  /**\n   * @param onDismiss\n   * @type {function}\n   * @default () => {}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get onDismiss(): ((event: MouseEvent, ...args: any[]) => void) | false {\n    const { onDismiss } = this.args;\n\n    if (typeof onDismiss === 'function') {\n      return onDismiss;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @param iconSize\n   * @type {string}\n   * @description ensures that the correct icon size is used. Automatically calculated.\n   */\n  get iconSize(): '16' | '24' {\n    if (this.args.type === 'compact') {\n      return '16';\n    } else {\n      return '24';\n    }\n  }\n\n  /**\n   * Get the class names to apply to the component.\n   * @method Alert#classNames\n   * @return {string} The \"class\" attribute to apply to the component.\n   */\n  get classNames(): string {\n    const classes = ['hds-alert'];\n\n    // Add a class based on the @type argument\n    classes.push(`hds-alert--type-${this.args.type}`);\n\n    // Add a class based on the @color argument\n    classes.push(`hds-alert--color-${this.color}`);\n\n    return classes.join(' ');\n  }\n\n  @action\n  didInsert(element: HTMLDivElement): void {\n    const actions = element.querySelectorAll(\n      `${CONTENT_ELEMENT_SELECTOR} button, ${CONTENT_ELEMENT_SELECTOR} a`\n    );\n    if (actions.length) {\n      this.role = 'alertdialog';\n    }\n\n    // `alertdialog` must have an accessible name so we use either the\n    // title or the description as label for the alert\n    const label =\n      element.querySelector(TITLE_ELEMENT_SELECTOR) ||\n      element.querySelector(DESCRIPTION_ELEMENT_SELECTOR);\n    if (label) {\n      const labelId = label.getAttribute('id') || guidFor(element);\n      label.setAttribute('id', labelId);\n      this.ariaLabelledBy = labelId;\n    }\n  }\n}\n"],"names":["TYPES","Object","values","HdsAlertTypeValues","DEFAULT_COLOR","HdsAlertColorValues","Neutral","COLORS","MAPPING_COLORS_TO_ICONS","Highlight","Success","Warning","Critical","CONTENT_ELEMENT_SELECTOR","TITLE_ELEMENT_SELECTOR","DESCRIPTION_ELEMENT_SELECTOR","HdsAlertComponent","_class","Component","constructor","owner","args","_initializerDefineProperty","_descriptor","_descriptor2","assert","join","type","includes","color","icon","undefined","onDismiss","iconSize","classNames","classes","push","didInsert","element","actions","querySelectorAll","length","role","label","querySelector","labelId","getAttribute","guidFor","setAttribute","ariaLabelledBy","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}