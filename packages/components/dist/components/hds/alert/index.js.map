{"version":3,"file":"index.js","sources":["../../../../src/components/hds/alert/index.hbs","../../../../src/components/hds/alert/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n<div\\n  class={{this.classNames}}\\n  role={{this._role}}\\n  aria-live={{if this._role \\\"polite\\\"}}\\n  aria-labelledby={{this._ariaLabelledBy}}\\n  {{did-insert this.didInsert}}\\n  ...attributes\\n>\\n  {{#if this.icon}}\\n    <div class=\\\"hds-alert__icon\\\">\\n      <Hds::Icon @name={{this.icon}} @size={{this.iconSize}} @stretched={{true}} />\\n    </div>\\n  {{/if}}\\n\\n  <div class=\\\"hds-alert__content\\\">\\n    <div class=\\\"hds-alert__text {{if (eq @type \\'compact\\') \\'hds-typography-body-100\\' \\'hds-typography-body-200\\'}}\\\">\\n      {{yield (hash Title=(component \\\"hds/alert/title\\\"))}}\\n      {{yield (hash Description=(component \\\"hds/alert/description\\\"))}}\\n    </div>\\n\\n    <div class=\\\"hds-alert__actions\\\">\\n      {{yield\\n        (hash\\n          Button=(component \\\"hds/button\\\" size=\\\"small\\\") LinkStandalone=(component \\\"hds/link/standalone\\\" size=\\\"small\\\")\\n        )\\n      }}\\n    </div>\\n    {{yield (hash Generic=(component \\\"hds/yield\\\"))}}\\n  </div>\\n\\n  {{#if this.onDismiss}}\\n    <Hds::DismissButton class=\\\"hds-alert__dismiss\\\" {{on \\\"click\\\" this.onDismiss}} />\\n  {{/if}}\\n</div>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { guidFor } from '@ember/object/internals';\nimport { tracked } from '@glimmer/tracking';\n\nimport { HdsAlertColorValues, HdsAlertTypeValues } from './types.ts';\n\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\nimport type HdsButtonComponent from '../button';\nimport type HdsLinkStandaloneComponent from '../link/standalone';\nimport type { HdsYieldSignature } from '../yield';\nimport type { HdsAlertColors, HdsAlertTypes } from './types.ts';\nimport type { HdsAlertTitleSignature } from './title.ts';\nimport type { HdsAlertDescriptionSignature } from './description.ts';\nimport type { HdsIconSignature } from '../icon';\n\nexport const TYPES: string[] = Object.values(HdsAlertTypeValues);\nexport const DEFAULT_COLOR = HdsAlertColorValues.Neutral;\nexport const COLORS: string[] = Object.values(HdsAlertColorValues);\n\nexport const MAPPING_COLORS_TO_ICONS = {\n  [HdsAlertColorValues.Neutral]: 'info',\n  [HdsAlertColorValues.Highlight]: 'info',\n  [HdsAlertColorValues.Success]: 'check-circle',\n  [HdsAlertColorValues.Warning]: 'alert-triangle',\n  [HdsAlertColorValues.Critical]: 'alert-diamond',\n} as const;\n\nconst CONTENT_ELEMENT_SELECTOR = '.hds-alert__content';\nconst TITLE_ELEMENT_SELECTOR = '.hds-alert__title';\nconst DESCRIPTION_ELEMENT_SELECTOR = '.hds-alert__description';\n\nexport interface HdsAlertSignature {\n  Args: {\n    type: HdsAlertTypes;\n    color?: HdsAlertColors;\n    icon?: HdsIconSignature['Args']['name'] | false;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onDismiss?: (event: MouseEvent, ...args: any[]) => void;\n  };\n  Blocks: {\n    default: [\n      {\n        Title?: ComponentLike<HdsAlertTitleSignature>;\n        Description?: ComponentLike<HdsAlertDescriptionSignature>;\n        Generic?: ComponentLike<HdsYieldSignature>;\n        LinkStandalone?: WithBoundArgs<\n          typeof HdsLinkStandaloneComponent,\n          'size'\n        >;\n        Button?: WithBoundArgs<typeof HdsButtonComponent, 'size'>;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class HdsAlert extends Component<HdsAlertSignature> {\n  @tracked private _role?: string;\n  @tracked private _ariaLabelledBy?: string;\n\n  constructor(owner: unknown, args: HdsAlertSignature['Args']) {\n    super(owner, args);\n\n    assert(\n      `@type for \"Hds::Alert\" must be one of the following: ${TYPES.join(\n        ', '\n      )}; received: ${this.args.type}`,\n      TYPES.includes(this.args.type)\n    );\n  }\n\n  // Determines the color scheme for the alert.\n  get color(): HdsAlertColors {\n    const { color = DEFAULT_COLOR } = this.args;\n\n    assert(\n      `@color for \"Hds::Alert\" must be one of the following: ${COLORS.join(\n        ', '\n      )}; received: ${color}`,\n      COLORS.includes(color)\n    );\n\n    return color;\n  }\n\n  // The name of the icon to be used.\n  get icon(): HdsIconSignature['Args']['name'] | false {\n    const { icon } = this.args;\n\n    // If `icon` isn't passed, use the pre-defined one from `color`\n    if (icon === undefined) {\n      if (this.args.type === 'compact') {\n        // for the \"compact\" type by default we use filled icons\n        return `${MAPPING_COLORS_TO_ICONS[this.color]}-fill`;\n      } else {\n        // for all the other types by default we use outlined icons\n        return MAPPING_COLORS_TO_ICONS[this.color];\n      }\n      // If `icon` is set explicitly to false, user doesn't want any icon in the alert\n    } else if (icon === false) {\n      assert(\n        `@icon for \"Hds::Alert\" with @type \"compact\" is required`,\n        this.args.type !== 'compact'\n      );\n\n      return false;\n    } else {\n      // If a name for `icon` is passed, set HdsIcon to that name\n      return icon;\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  get onDismiss(): ((event: MouseEvent, ...args: any[]) => void) | false {\n    const { onDismiss } = this.args;\n\n    if (typeof onDismiss === 'function') {\n      return onDismiss;\n    } else {\n      return false;\n    }\n  }\n\n  // Ensures that the correct icon size is used. Automatically calculated.\n  get iconSize(): HdsIconSignature['Args']['size'] {\n    if (this.args.type === 'compact') {\n      return '16';\n    } else {\n      return '24';\n    }\n  }\n\n  get classNames(): string {\n    const classes = ['hds-alert'];\n\n    // Add a class based on the @type argument\n    classes.push(`hds-alert--type-${this.args.type}`);\n\n    // Add a class based on the @color argument\n    classes.push(`hds-alert--color-${this.color}`);\n\n    return classes.join(' ');\n  }\n\n  @action\n  didInsert(element: HTMLDivElement): void {\n    const actions = element.querySelectorAll(\n      `${CONTENT_ELEMENT_SELECTOR} button, ${CONTENT_ELEMENT_SELECTOR} a`\n    );\n\n    // an Alert which actually alerts users (has role=\"alert\" & aria-live=\"polite\") as opposed to an informational or promo \"alert\"\n    const isSemanticAlert: boolean =\n      this.color === 'warning' ||\n      this.color === 'critical' ||\n      this.color === 'success';\n\n    if (isSemanticAlert && actions.length) {\n      this._role = 'alertdialog';\n    } else if (isSemanticAlert) {\n      this._role = 'alert';\n    }\n\n    // `alertdialog` must have an accessible name so we use either the\n    // title or the description as label for the alert\n    const label =\n      element.querySelector(TITLE_ELEMENT_SELECTOR) ||\n      element.querySelector(DESCRIPTION_ELEMENT_SELECTOR);\n    if (label) {\n      const labelId = label.getAttribute('id') || guidFor(element);\n      label.setAttribute('id', labelId);\n      this._ariaLabelledBy = labelId;\n    }\n  }\n}\n"],"names":["TYPES","Object","values","HdsAlertTypeValues","DEFAULT_COLOR","HdsAlertColorValues","Neutral","COLORS","MAPPING_COLORS_TO_ICONS","Highlight","Success","Warning","Critical","CONTENT_ELEMENT_SELECTOR","TITLE_ELEMENT_SELECTOR","DESCRIPTION_ELEMENT_SELECTOR","HdsAlert","_class","Component","constructor","owner","args","_initializerDefineProperty","_descriptor","_descriptor2","assert","join","type","includes","color","icon","undefined","onDismiss","iconSize","classNames","classes","push","didInsert","element","actions","querySelectorAll","isSemanticAlert","length","_role","label","querySelector","labelId","getAttribute","guidFor","setAttribute","_ariaLabelledBy","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}