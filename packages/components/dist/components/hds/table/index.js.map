{"version":3,"file":"index.js","sources":["../../../../src/components/hds/table/index.hbs","../../../../src/components/hds/table/index.ts"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!\\n  Copyright (c) HashiCorp, Inc.\\n  SPDX-License-Identifier: MPL-2.0\\n}}\\n\\n<table class={{this.classNames}} ...attributes>\\n  {{#if @columns}}\\n    <caption class=\\\"sr-only\\\" aria-live=\\\"polite\\\">{{@caption}} {{this.sortedMessageText}}</caption>\\n  {{else if @caption}}\\n    <caption class=\\\"sr-only\\\">{{@caption}}</caption>\\n  {{/if}}\\n\\n  <thead class=\\\"hds-table__thead\\\">\\n    {{#if @columns}}\\n      <Hds::Table::Tr\\n        @selectionScope=\\\"col\\\"\\n        @onClickSortBySelected={{if @selectableColumnKey (fn this.setSortBy @selectableColumnKey)}}\\n        @sortBySelectedOrder={{if (eq this.sortBy @selectableColumnKey) this.sortOrder}}\\n        @isSelectable={{@isSelectable}}\\n        @onSelectionChange={{this.onSelectionAllChange}}\\n        @didInsert={{this.didInsertSelectAllCheckbox}}\\n        @willDestroy={{this.willDestroySelectAllCheckbox}}\\n        @selectionAriaLabelSuffix=\\\"all rows\\\"\\n      >\\n        {{#each @columns as |column|}}\\n          {{#if column.isSortable}}\\n            <Hds::Table::ThSort\\n              @sortOrder={{if (eq column.key this.sortBy) this.sortOrder}}\\n              @onClickSort={{fn this.setSortBy column.key}}\\n              @align={{column.align}}\\n              @width={{column.width}}\\n              @tooltip={{column.tooltip}}\\n            >\\n              {{column.label}}\\n            </Hds::Table::ThSort>\\n          {{else}}\\n            <Hds::Table::Th\\n              @align={{column.align}}\\n              @width={{column.width}}\\n              @tooltip={{column.tooltip}}\\n              @isVisuallyHidden={{column.isVisuallyHidden}}\\n            >{{column.label}}</Hds::Table::Th>\\n          {{/if}}\\n        {{/each}}\\n      </Hds::Table::Tr>\\n    {{else}}\\n      {{yield\\n        (hash\\n          Tr=(component\\n            \\\"hds/table/tr\\\"\\n            selectionScope=\\\"col\\\"\\n            isSelectable=@isSelectable\\n            onSelectionChange=this.onSelectionAllChange\\n            didInsert=this.didInsertSelectAllCheckbox\\n            willDestroy=this.willDestroySelectAllCheckbox\\n            selectionAriaLabelSuffix=\\\"all rows\\\"\\n            onClickSortBySelected=(if @selectableColumnKey (fn this.setSortBy @selectableColumnKey))\\n            sortBySelectedOrder=(if (eq this.sortBy @selectableColumnKey) this.sortOrder)\\n          )\\n          Th=(component \\\"hds/table/th\\\")\\n          ThSort=(component \\\"hds/table/th-sort\\\")\\n          sortBy=this.sortBy\\n          sortOrder=this.sortOrder\\n          setSortBy=this.setSortBy\\n        )\\n        to=\\\"head\\\"\\n      }}\\n    {{/if}}\\n  </thead>\\n\\n  <tbody class=\\\"hds-table__tbody\\\">\\n    {{#if @columns}}\\n      {{! ----------------------------------------------------------------------------------------\\n        IMPORTANT: we loop on the `model` array and for each record\\n        we yield the Tr/Td/Th elements _and_ the record itself as `data`\\n        this means the consumer will *have to* use the `data` key to access it in their template\\n      -------------------------------------------------------------------------------------------- }}\\n      {{#each (sort-by this.getSortCriteria @model) key=this.identityKey as |record index|}}\\n        {{yield\\n          (hash\\n            Tr=(component\\n              \\\"hds/table/tr\\\"\\n              selectionScope=\\\"row\\\"\\n              isSelectable=@isSelectable\\n              onSelectionChange=this.onSelectionRowChange\\n              didInsert=this.didInsertRowCheckbox\\n              willDestroy=this.willDestroyRowCheckbox\\n              selectionAriaLabelSuffix=@selectionAriaLabelSuffix\\n            )\\n            Th=(component \\\"hds/table/th\\\" scope=\\\"row\\\")\\n            Td=(component \\\"hds/table/td\\\" align=@align)\\n            data=record\\n            rowIndex=index\\n          )\\n          to=\\\"body\\\"\\n        }}\\n      {{/each}}\\n    {{else}}\\n      {{yield\\n        (hash\\n          Tr=(component\\n            \\\"hds/table/tr\\\"\\n            selectionScope=\\\"row\\\"\\n            isSelectable=@isSelectable\\n            onSelectionChange=this.onSelectionRowChange\\n            didInsert=this.didInsertRowCheckbox\\n            willDestroy=this.willDestroyRowCheckbox\\n            selectionAriaLabelSuffix=@selectionAriaLabelSuffix\\n          )\\n          Th=(component \\\"hds/table/th\\\" scope=\\\"row\\\")\\n          Td=(component \\\"hds/table/td\\\" align=@align)\\n          sortBy=this.sortBy\\n          sortOrder=this.sortOrder\\n        )\\n        to=\\\"body\\\"\\n      }}\\n    {{/if}}\\n  </tbody>\\n</table>\")","/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { action } from '@ember/object';\nimport { assert } from '@ember/debug';\nimport { tracked } from '@glimmer/tracking';\nimport type { ComponentLike } from '@glint/template';\n\nimport {\n  HdsTableDensityValues,\n  HdsTableThSortOrderValues,\n  HdsTableVerticalAlignmentValues,\n} from './types.ts';\nimport type {\n  HdsTableColumn,\n  HdsTableDensities,\n  HdsTableHorizontalAlignment,\n  HdsTableOnSelectionChangeSignature,\n  HdsTableSelectableRow,\n  HdsTableSortingFunction,\n  HdsTableThSortOrder,\n  HdsTableVerticalAlignment,\n  HdsTableModel,\n} from './types';\nimport type { HdsFormCheckboxBaseSignature } from '../form/checkbox/base';\nimport type { HdsTableTdSignature } from './td.ts';\nimport type { HdsTableThSignature } from './th.ts';\nimport type { HdsTableThSortSignature } from './th-sort.ts';\nimport type { HdsTableTrSignature } from './tr.ts';\nimport type Owner from '@ember/owner';\n\nexport const DENSITIES: HdsTableDensities[] = Object.values(\n  HdsTableDensityValues\n);\nexport const DEFAULT_DENSITY = HdsTableDensityValues.Medium;\n\nexport const VALIGNMENTS: HdsTableVerticalAlignment[] = Object.values(\n  HdsTableVerticalAlignmentValues\n);\nexport const DEFAULT_VALIGN = HdsTableVerticalAlignmentValues.Top;\n\nexport interface HdsTableSignature {\n  Args: {\n    align?: HdsTableHorizontalAlignment;\n    caption?: string;\n    columns?: HdsTableColumn[];\n    density?: HdsTableDensities;\n    identityKey?: string;\n    isFixedLayout?: boolean;\n    isSelectable?: boolean;\n    isStriped?: boolean;\n    model?: HdsTableModel;\n    onSelectionChange?: (selection: HdsTableOnSelectionChangeSignature) => void;\n    onSort?: (sortBy: string, sortOrder: HdsTableThSortOrder) => void;\n    selectionAriaLabelSuffix?: string;\n    sortBy?: string;\n    selectableColumnKey?: string;\n    sortedMessageText?: string;\n    sortOrder?: HdsTableThSortOrder;\n    valign?: HdsTableVerticalAlignment;\n  };\n  Blocks: {\n    head?: [\n      {\n        Tr?: ComponentLike<HdsTableTrSignature>;\n        Th?: ComponentLike<HdsTableThSignature>;\n        ThSort?: ComponentLike<HdsTableThSortSignature>;\n        sortBy?: string;\n        sortOrder?: HdsTableThSortOrder;\n        setSortBy?: (column: string) => void;\n      },\n    ];\n    body?: [\n      {\n        Td?: ComponentLike<HdsTableTdSignature>;\n        Tr?: ComponentLike<HdsTableTrSignature>;\n        Th?: ComponentLike<HdsTableThSignature>;\n        data?: Record<string, unknown>;\n        rowIndex?: number;\n        sortBy?: string;\n        sortOrder?: HdsTableThSortOrder;\n      },\n    ];\n  };\n  Element: HTMLTableElement;\n}\n\nexport default class HdsTable extends Component<HdsTableSignature> {\n  @tracked sortBy;\n  @tracked sortOrder;\n  @tracked\n  private _selectAllCheckbox?: HdsFormCheckboxBaseSignature['Element'] =\n    undefined;\n  private _selectableRows: HdsTableSelectableRow[] = [];\n  @tracked private _isSelectAllCheckboxSelected?: boolean = undefined;\n\n  constructor(owner: Owner, args: HdsTableSignature['Args']) {\n    super(owner, args);\n    this.sortBy = this.args.sortBy ?? undefined;\n    this.sortOrder = this.args.sortOrder ?? HdsTableThSortOrderValues.Asc;\n  }\n\n  get getSortCriteria(): string | HdsTableSortingFunction<unknown> {\n    // get the current column\n    const currentColumn = this.args?.columns?.find(\n      (column) => column.key === this.sortBy\n    );\n    if (\n      // check if there is a custom sorting function associated with the current `sortBy` column (we assume the column has `isSortable`)\n      currentColumn?.sortingFunction &&\n      typeof currentColumn.sortingFunction === 'function'\n    ) {\n      return currentColumn.sortingFunction;\n    } else {\n      // otherwise fallback to the default format \"sortBy:sortOrder\"\n      return `${this.sortBy}:${this.sortOrder}`;\n    }\n  }\n\n  get identityKey(): string | undefined {\n    // we have to provide a way for the consumer to pass undefined because Ember tries to interpret undefined as missing an arg and therefore falls back to the default\n    if (this.args.identityKey === 'none') {\n      return undefined;\n    } else {\n      return this.args.identityKey ?? '@identity';\n    }\n  }\n\n  get sortedMessageText(): string {\n    if (this.args.sortedMessageText) {\n      return this.args.sortedMessageText;\n    } else if (this.sortBy && this.sortOrder) {\n      // we should allow the user to define a custom value here (e.g., for i18n) - tracked with HDS-965\n      return `Sorted by ${this.sortBy} ${this.sortOrder}ending`;\n    } else {\n      return '';\n    }\n  }\n\n  get isStriped(): boolean {\n    return this.args.isStriped ?? false;\n  }\n\n  get isFixedLayout(): boolean {\n    return this.args.isFixedLayout ?? false;\n  }\n\n  get density(): HdsTableDensities {\n    const { density = DEFAULT_DENSITY } = this.args;\n\n    assert(\n      `@density for \"Hds::Table\" must be one of the following: ${DENSITIES.join(\n        ', '\n      )}; received: ${density}`,\n      DENSITIES.includes(density)\n    );\n\n    return density;\n  }\n\n  get valign(): HdsTableVerticalAlignment {\n    const { valign = DEFAULT_VALIGN } = this.args;\n\n    assert(\n      `@valign for \"Hds::Table\" must be one of the following: ${VALIGNMENTS.join(\n        ', '\n      )}; received: ${valign}`,\n      VALIGNMENTS.includes(valign)\n    );\n\n    return valign;\n  }\n\n  get classNames(): string {\n    const classes = ['hds-table'];\n\n    // add a class based on the @isStriped argument\n    if (this.isStriped) {\n      classes.push('hds-table--striped');\n    }\n\n    // add a class based on the @isFixedLayout argument\n    if (this.isFixedLayout) {\n      classes.push('hds-table--layout-fixed');\n    }\n\n    // add a class based on the @density argument\n    if (this.density) {\n      classes.push(`hds-table--density-${this.density}`);\n    }\n\n    // add a class based on the @valign argument\n    if (this.valign) {\n      classes.push(`hds-table--valign-${this.valign}`);\n    }\n\n    return classes.join(' ');\n  }\n\n  @action\n  setSortBy(column: string): void {\n    if (this.sortBy === column) {\n      // check to see if the column is already sorted and invert the sort order if so\n      this.sortOrder =\n        this.sortOrder === HdsTableThSortOrderValues.Asc\n          ? HdsTableThSortOrderValues.Desc\n          : HdsTableThSortOrderValues.Asc;\n    } else {\n      // otherwise, set the sort order to ascending\n      this.sortBy = column;\n      this.sortOrder = HdsTableThSortOrderValues.Asc;\n    }\n\n    const { onSort } = this.args;\n\n    if (typeof onSort === 'function') {\n      onSort(this.sortBy, this.sortOrder);\n    }\n  }\n\n  onSelectionChangeCallback(\n    checkbox?: HdsFormCheckboxBaseSignature['Element'],\n    selectionKey?: string\n  ): void {\n    const { onSelectionChange } = this.args;\n    if (typeof onSelectionChange === 'function') {\n      onSelectionChange({\n        selectionKey: selectionKey,\n        selectionCheckboxElement: checkbox,\n        selectedRowsKeys: this._selectableRows.reduce<string[]>((acc, row) => {\n          if (row.checkbox.checked) {\n            acc.push(row.selectionKey);\n          }\n          return acc;\n        }, []),\n        selectableRowsStates: this._selectableRows.reduce(\n          (\n            acc: { selectionKey: string; isSelected: boolean | undefined }[],\n            row\n          ) => {\n            acc.push({\n              selectionKey: row.selectionKey,\n              isSelected: row.checkbox.checked,\n            });\n            return acc;\n          },\n          []\n        ),\n      });\n    }\n  }\n\n  @action\n  onSelectionAllChange(): void {\n    this._selectableRows.forEach((row) => {\n      row.checkbox.checked = this._selectAllCheckbox?.checked ?? false;\n    });\n    this._isSelectAllCheckboxSelected =\n      this._selectAllCheckbox?.checked ?? false;\n    this.onSelectionChangeCallback(this._selectAllCheckbox, 'all');\n  }\n\n  @action\n  onSelectionRowChange(\n    checkbox?: HdsFormCheckboxBaseSignature['Element'],\n    selectionKey?: string\n  ): void {\n    this.setSelectAllState();\n    this.onSelectionChangeCallback(checkbox, selectionKey);\n  }\n\n  @action\n  didInsertSelectAllCheckbox(\n    checkbox: HdsFormCheckboxBaseSignature['Element']\n  ): void {\n    this._selectAllCheckbox = checkbox;\n  }\n\n  @action\n  willDestroySelectAllCheckbox(): void {\n    this._selectAllCheckbox = undefined;\n  }\n\n  @action\n  didInsertRowCheckbox(\n    checkbox: HdsFormCheckboxBaseSignature['Element'],\n    selectionKey?: string\n  ): void {\n    if (selectionKey) {\n      this._selectableRows.push({ selectionKey, checkbox });\n    }\n    this.setSelectAllState();\n  }\n\n  @action\n  willDestroyRowCheckbox(selectionKey?: string): void {\n    this._selectableRows = this._selectableRows.filter(\n      (row) => row.selectionKey !== selectionKey\n    );\n    this.setSelectAllState();\n  }\n\n  @action\n  setSelectAllState(): void {\n    if (this._selectAllCheckbox) {\n      const selectableRowsCount = this._selectableRows.length;\n      const selectedRowsCount = this._selectableRows.filter(\n        (row) => row.checkbox.checked\n      ).length;\n\n      this._selectAllCheckbox.checked =\n        selectedRowsCount === selectableRowsCount;\n      this._selectAllCheckbox.indeterminate =\n        selectedRowsCount > 0 && selectedRowsCount < selectableRowsCount;\n      this._isSelectAllCheckboxSelected = this._selectAllCheckbox.checked;\n    }\n  }\n}\n"],"names":["DENSITIES","Object","values","HdsTableDensityValues","DEFAULT_DENSITY","Medium","VALIGNMENTS","HdsTableVerticalAlignmentValues","DEFAULT_VALIGN","Top","HdsTable","_class","Component","constructor","owner","args","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_defineProperty","_descriptor4","sortBy","undefined","sortOrder","HdsTableThSortOrderValues","Asc","getSortCriteria","currentColumn","columns","find","column","key","sortingFunction","identityKey","sortedMessageText","isStriped","isFixedLayout","density","assert","join","includes","valign","classNames","classes","push","setSortBy","Desc","onSort","onSelectionChangeCallback","checkbox","selectionKey","onSelectionChange","selectionCheckboxElement","selectedRowsKeys","_selectableRows","reduce","acc","row","checked","selectableRowsStates","isSelected","onSelectionAllChange","forEach","_selectAllCheckbox","_isSelectAllCheckboxSelected","onSelectionRowChange","setSelectAllState","didInsertSelectAllCheckbox","willDestroySelectAllCheckbox","didInsertRowCheckbox","willDestroyRowCheckbox","filter","selectableRowsCount","length","selectedRowsCount","indeterminate","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer","action","getOwnPropertyDescriptor","setComponentTemplate","TEMPLATE"],"mappings":"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"}