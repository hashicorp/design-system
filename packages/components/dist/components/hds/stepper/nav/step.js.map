{"version":3,"file":"step.js","sources":["../../../../../src/components/hds/stepper/nav/step.ts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: MPL-2.0\n */\n\nimport Component from '@glimmer/component';\nimport { guidFor } from '@ember/object/internals';\nimport { action } from '@ember/object';\nimport { modifier } from 'ember-modifier';\n\nimport {\n  HdsStepperNavStatusesValues,\n  HdsStepperNavStatusToIndicatorStatus,\n  HdsStepperNavStatusToSrOnlyText,\n  HdsStepperTitleTagValues,\n} from '../types.ts';\n\nimport type {\n  HdsStepperNavPanelIds,\n  HdsStepperNavStatuses,\n  HdsStepperNavStepIds,\n  HdsStepperStatuses,\n  HdsStepperTitleTags,\n} from '../types.ts';\n\nexport const MAPPING_STATUS_TO_INDICATOR_STATUS =\n  HdsStepperNavStatusToIndicatorStatus;\nexport const MAPPING_STATUS_TO_SR_ONLY_TEXT = HdsStepperNavStatusToSrOnlyText;\n\nexport interface HdsStepperNavStepSignature {\n  Args: {\n    currentStep: number;\n    isNavInteractive?: boolean;\n    titleTag?: HdsStepperTitleTags;\n    stepIds?: HdsStepperNavStepIds;\n    panelIds?: HdsStepperNavPanelIds;\n    didInsertNode?: () => void;\n    willDestroyNode?: (element: HTMLButtonElement) => void;\n    onStepChange?: (event: MouseEvent, nodeIndex: number) => void;\n    onKeyUp?: (nodeIndex: number, event: KeyboardEvent) => void;\n  };\n  Blocks: {\n    title: [];\n    description?: [];\n  };\n  Element: HTMLElement;\n}\n\nexport default class HdsStepperNavStep extends Component<HdsStepperNavStepSignature> {\n  private _stepId = 'step-' + guidFor(this);\n  private _elementId?: string;\n\n  private _setUpStep = modifier(\n    (\n      element: HTMLElement,\n      [insertCallbackFunction, destroyCallbackFunction]\n    ) => {\n      if (typeof insertCallbackFunction === 'function') {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        insertCallbackFunction(element);\n      }\n\n      return () => {\n        if (typeof destroyCallbackFunction === 'function') {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n          destroyCallbackFunction(element);\n        }\n      };\n    }\n  );\n\n  get titleTag(): HdsStepperTitleTags {\n    return this.args.titleTag ?? HdsStepperTitleTagValues.Div;\n  }\n\n  get isNavInteractive(): boolean {\n    return this.args.isNavInteractive != undefined\n      ? this.args.isNavInteractive\n      : true;\n  }\n\n  get nodeIndex(): number | undefined {\n    return this.args.stepIds?.indexOf(this._stepId);\n  }\n\n  get stepNumber(): number | undefined {\n    return this.args.stepIds\n      ? this.args.stepIds.indexOf(this._stepId) + 1\n      : undefined;\n  }\n\n  get coupledPanelId(): string | undefined {\n    return this.nodeIndex !== undefined\n      ? this.args.panelIds?.[this.nodeIndex]\n      : undefined;\n  }\n\n  get status(): HdsStepperNavStatuses {\n    if (this.nodeIndex != undefined && this.nodeIndex >= 0) {\n      if (this.nodeIndex === this.args.currentStep) {\n        return HdsStepperNavStatusesValues.Active;\n      } else if (this.nodeIndex < this.args.currentStep) {\n        return HdsStepperNavStatusesValues.Complete;\n      } else {\n        return HdsStepperNavStatusesValues.Incomplete;\n      }\n    } else {\n      return HdsStepperNavStatusesValues.Incomplete;\n    }\n  }\n\n  get stepIndicatorStatus(): HdsStepperStatuses {\n    return MAPPING_STATUS_TO_INDICATOR_STATUS[this.status];\n  }\n\n  get statusSrOnlyText(): string {\n    return MAPPING_STATUS_TO_SR_ONLY_TEXT[this.status];\n  }\n\n  get isInteractive(): boolean {\n    return (\n      this.isNavInteractive &&\n      this.status === HdsStepperNavStatusesValues.Complete\n    );\n  }\n\n  @action\n  didInsertNode(element: HTMLButtonElement): void {\n    const { didInsertNode } = this.args;\n\n    if (typeof didInsertNode === 'function') {\n      this._elementId = element.id;\n      didInsertNode();\n    }\n  }\n\n  @action\n  willDestroyNode(element: HTMLButtonElement): void {\n    const { willDestroyNode } = this.args;\n\n    if (typeof willDestroyNode === 'function') {\n      willDestroyNode(element);\n    }\n  }\n\n  @action\n  onStepChange(event: MouseEvent): false | undefined {\n    const { onStepChange } = this.args;\n\n    if (\n      this.isInteractive &&\n      this.nodeIndex !== undefined &&\n      typeof onStepChange === 'function'\n    ) {\n      onStepChange(event, this.nodeIndex);\n    } else {\n      return false;\n    }\n  }\n\n  @action\n  onKeyUp(event: KeyboardEvent): void {\n    const { onKeyUp } = this.args;\n\n    if (\n      !(this.status === HdsStepperNavStatusesValues.Incomplete) &&\n      this.nodeIndex !== undefined &&\n      typeof onKeyUp === 'function'\n    ) {\n      onKeyUp(this.nodeIndex, event);\n    }\n  }\n\n  get classNames(): string {\n    const classes = ['hds-stepper-nav__step'];\n\n    classes.push(`hds-stepper-nav__step--${this.status}`);\n\n    if (this.isInteractive) {\n      classes.push('hds-stepper-nav__step--interactive');\n    }\n\n    if (this.isNavInteractive) {\n      classes.push('hds-stepper-nav__step--nav-interactive');\n    }\n\n    return classes.join(' ');\n  }\n}\n"],"names":["MAPPING_STATUS_TO_INDICATOR_STATUS","HdsStepperNavStatusToIndicatorStatus","MAPPING_STATUS_TO_SR_ONLY_TEXT","HdsStepperNavStatusToSrOnlyText","HdsStepperNavStep","Component","_stepId","guidFor","_elementId","_setUpStep","modifier","element","insertCallbackFunction","destroyCallbackFunction","titleTag","args","HdsStepperTitleTagValues","Div","isNavInteractive","undefined","nodeIndex","stepIds","indexOf","stepNumber","coupledPanelId","panelIds","status","currentStep","HdsStepperNavStatusesValues","Active","Complete","Incomplete","stepIndicatorStatus","statusSrOnlyText","isInteractive","didInsertNode","id","n","prototype","action","willDestroyNode","onStepChange","event","onKeyUp","classNames","classes","push","join","setComponentTemplate","TEMPLATE"],"mappings":"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"}