{"version":3,"file":"hds-theming.js","sources":["../../src/services/hds-theming.ts"],"sourcesContent":["import Service from '@ember/service';\nimport { tracked } from '@glimmer/tracking';\n\nexport const LOCALSTORAGE_KEY = 'hds-current-theme';\n\nexport enum HdsThemeValues {\n  // `auto` means to use the default in the browser (which depends on what the consumer imports as CSS)\n  Auto = 'auto',\n  Light = 'light',\n  Dark = 'dark',\n}\n\nexport type HdsThemes = `${HdsThemeValues}` | undefined;\n\nexport const THEMES: string[] = Object.values(HdsThemeValues);\n\nexport default class HdsThemingService extends Service {\n  @tracked _currentTheme: HdsThemes = undefined;\n\n  constructor(owner: object | undefined) {\n    super(owner);\n    this.initializeTheme();\n  }\n\n  initializeTheme() {\n    const _initialTheme = localStorage.getItem(LOCALSTORAGE_KEY);\n    if (\n      _initialTheme === 'auto' ||\n      _initialTheme === 'light' ||\n      _initialTheme === 'dark'\n    ) {\n      this.setTheme(_initialTheme);\n    }\n  }\n\n  getTheme(): HdsThemes {\n    return this._currentTheme;\n  }\n\n  setTheme(theme: HdsThemes) {\n    // console.log('setting HDS theme', theme);\n\n    if (theme === undefined) {\n      localStorage.removeItem(LOCALSTORAGE_KEY);\n    } else {\n      localStorage.setItem(LOCALSTORAGE_KEY, theme);\n    }\n\n    // IMPORTANT: for this to work, it needs to be the HTML tag (it's the `:root` in CSS)\n    const rootElement = document.querySelector('html');\n\n    if (rootElement) {\n      if (theme === undefined) {\n        rootElement.removeAttribute('data-hds-theme');\n        this._currentTheme = undefined;\n      } else {\n        rootElement.setAttribute('data-hds-theme', theme);\n        this._currentTheme = theme;\n      }\n    }\n  }\n}\n"],"names":["LOCALSTORAGE_KEY","HdsThemeValues","THEMES","Object","values","HdsThemingService","_class","Service","constructor","owner","_initializerDefineProperty","_descriptor","initializeTheme","_initialTheme","localStorage","getItem","setTheme","getTheme","_currentTheme","theme","undefined","removeItem","setItem","rootElement","document","querySelector","removeAttribute","setAttribute","_applyDecoratedDescriptor","prototype","tracked","configurable","enumerable","writable","initializer"],"mappings":";;;;;AAGO,MAAMA,gBAAgB,GAAG;AAEpBC,IAAAA,cAAc,0BAAdA,cAAc,EAAA;EAAdA,cAAc,CAAA,MAAA,CAAA,GAAA,MAAA;EAAdA,cAAc,CAAA,OAAA,CAAA,GAAA,OAAA;EAAdA,cAAc,CAAA,MAAA,CAAA,GAAA,MAAA;AAAA,EAAA,OAAdA,cAAc;AAAA,CAAA,CAAA,EAAA;AASnB,MAAMC,MAAgB,GAAGC,MAAM,CAACC,MAAM,CAACH,cAAc;AAEvCI,IAAAA,iBAAiB,IAAAC,MAAA,GAAvB,MAAMD,iBAAiB,SAASE,OAAO,CAAC;EAGrDC,WAAWA,CAACC,KAAyB,EAAE;IACrC,KAAK,CAACA,KAAK,CAAC;AAACC,IAAAA,0BAAA,wBAAAC,WAAA,EAAA,IAAA,CAAA;IACb,IAAI,CAACC,eAAe,EAAE;AACxB;AAEAA,EAAAA,eAAeA,GAAG;AAChB,IAAA,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAACf,gBAAgB,CAAC;IAC5D,IACEa,aAAa,KAAK,MAAM,IACxBA,aAAa,KAAK,OAAO,IACzBA,aAAa,KAAK,MAAM,EACxB;AACA,MAAA,IAAI,CAACG,QAAQ,CAACH,aAAa,CAAC;AAC9B;AACF;AAEAI,EAAAA,QAAQA,GAAc;IACpB,OAAO,IAAI,CAACC,aAAa;AAC3B;EAEAF,QAAQA,CAACG,KAAgB,EAAE;AACzB;;IAEA,IAAIA,KAAK,KAAKC,SAAS,EAAE;AACvBN,MAAAA,YAAY,CAACO,UAAU,CAACrB,gBAAgB,CAAC;AAC3C,KAAC,MAAM;AACLc,MAAAA,YAAY,CAACQ,OAAO,CAACtB,gBAAgB,EAAEmB,KAAK,CAAC;AAC/C;;AAEA;AACA,IAAA,MAAMI,WAAW,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;AAElD,IAAA,IAAIF,WAAW,EAAE;MACf,IAAIJ,KAAK,KAAKC,SAAS,EAAE;AACvBG,QAAAA,WAAW,CAACG,eAAe,CAAC,gBAAgB,CAAC;QAC7C,IAAI,CAACR,aAAa,GAAGE,SAAS;AAChC,OAAC,MAAM;AACLG,QAAAA,WAAW,CAACI,YAAY,CAAC,gBAAgB,EAAER,KAAK,CAAC;QACjD,IAAI,CAACD,aAAa,GAAGC,KAAK;AAC5B;AACF;AACF;AACF,CAAC,GAAAR,WAAA,GAAAiB,yBAAA,CAAAtB,MAAA,CAAAuB,SAAA,EAAA,eAAA,EAAA,CA5CEC,OAAO,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAA4Bd,SAAS;AAAA;AAAA,CAAA,CAAA,GAAAd,MAAA;;;;"}