{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
<fieldset
  class="hds-key-value-pair"
  ...attributes
  tabindex="-1"
  {{this._setUpFieldsetElement}}
  {{style --hds-key-value-pair-columns=this.columns}}
>
  <div class="hds-key-value-pair__header">
    {{yield
      (hash
        Legend=(component "hds/form/legend" isOptional=@isOptional isReqiured=@isRequired)
        HelperText=(component "hds/form/helper-text")
        Error=(component "hds/form/error")
      )
      to="header"
    }}
  </div>

  {{#each this.data as |item index|}}
    {{!-- {{#let ((gt index 0) (eq this._isDesktop true)) as |isLabelHidden|}} --}}
    <div class="hds-key-value-pair__row {{if (eq index 0) 'hds-key-value-pair__row--first'}}">
      {{yield (hash Field=(component "hds/key-value-pair/field") rowData=item) to="row"}}
      {{#if this.canDeleteRow}}
        <Hds::KeyValuePair::DeleteRowButton
          @text={{(concat this.deleteRowButtonText " " index)}}
          @onClick={{this.onDeleteRowClick}}
          @index={{index}}
        />
      {{/if}}
    </div>
    {{!-- {{/let}} --}}
  {{/each}}

  <div class="hds-key-value-pair__footer">
    {{yield (hash ExtraBefore=(component "hds/yield")) to="footer"}}
    {{#if this.canAddRow}}
      <Hds::KeyValuePair::AddRowButton @text={{this.addRowButtonText}} @onClick={{this.onAddRowClick}} />
    {{/if}}
    {{yield (hash ExtraAfter=(component "hds/yield")) to="footer"}}
  </div>
</fieldset>