{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
<fieldset class="hds-key-value-pair" ...attributes>
  <div class="hds-key-value-pair__header">
    {{yield
      (hash
        Legend=(component "hds/form/legend" isOptional=@isOptional isReqiured=@isRequired)
        HelperText=(component "hds/form/helper-text")
        Error=(component "hds/form/error")
      )
      to="header"
    }}
  </div>

  {{#each @data as |item index|}}
    <div class="hds-key-value-pair__row">
      {{yield
        (hash
          Select=(component "hds/form/select/field")
          TextInput=(component "hds/form/text-input/field")
          Generic=(component "hds/yield")
          rowData=item
        )
        to="row"
      }}
      {{#if this.canDeleteRow}}
        <Hds::KeyValuePair::DeleteRowButton />
      {{/if}}
    </div>
  {{/each}}

  <div class="hds-key-value-pair__footer">
    {{yield (hash ExtraBefore=(component "hds/yield")) to="footer"}}
    {{#if this.canAddRow}}
      <Hds::KeyValuePair::AddRowButton />
    {{/if}}
    {{yield (hash ExtraAfter=(component "hds/yield")) to="footer"}}
  </div>
</fieldset>