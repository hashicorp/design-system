{{!
  Copyright IBM Corp. 2021, 2025
  SPDX-License-Identifier: MPL-2.0
}}
<div class={{this.classNames}} ...attributes>
  {{yield
    (hash
      Label=(component
        "hds/form/label"
        controlId=this.id
        isRequired=this.isRequired
        isOptional=this.isOptional
        contextualClass="hds-form-field__label"
      )
    )
  }}
  {{#unless (eq @layout "flag")}}
    {{yield
      (hash
        HelperText=(component
          "hds/form/helper-text"
          controlId=this.id
          onInsert=this.appendDescriptor
          contextualClass="hds-form-field__helper-text"
        )
      )
    }}
  {{/unless}}
  <div class="hds-form-field__control">
    {{! @glint-expect-error }}
    {{yield (hash Control=(component "hds/yield") id=this.id ariaDescribedBy=this.ariaDescribedBy)}}
  </div>
  {{#if (eq @layout "flag")}}
    {{yield
      (hash
        HelperText=(component
          "hds/form/helper-text"
          controlId=this.id
          onInsert=this.appendDescriptor
          contextualClass="hds-form-field__helper-text"
        )
      )
    }}
  {{/if}}
  {{yield
    (hash
      CharacterCount=(component
        "hds/form/character-count"
        controlId=this.id
        onInsert=this.appendDescriptor
        contextualClass="hds-form-field__character-count"
      )
    )
  }}
  {{yield
    (hash
      Error=(component
        "hds/form/error"
        controlId=this.id
        onInsert=this.appendDescriptor
        onRemove=this.removeDescriptor
        contextualClass="hds-form-field__error"
      )
    )
  }}
</div>