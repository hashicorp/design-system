{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
<fieldset class="hds-key-value-pair" ...attributes tabindex="-1" {{style --hds-key-value-pair-columns=this.columns}}>
  <div class="hds-key-value-pair__header">
    {{yield
      (hash
        Legend=(component "hds/form/legend" isOptional=@isOptional isReqiured=@isRequired)
        HelperText=(component "hds/form/helper-text")
        Error=(component "hds/form/error")
      )
      to="header"
    }}
  </div>

  {{#each this.data as |item index|}}
    <div class="hds-key-value-pair__row {{if (eq index 0) 'hds-key-value-pair__row--first'}}">
      {{yield
        (hash
          Field=(component "hds/form/key-value-pair/field")
          DeleteRowButton=(component
            "hds/form/key-value-pair/delete-row-button" rowIndex=index canDeleteRow=this.canDeleteRow
          )
          rowData=item
        )
        to="row"
      }}
    </div>
  {{/each}}

  <div class="hds-key-value-pair__footer">
    {{yield
      (hash Generic=(component "hds/yield") AddRowButton=(component "hds/form/key-value-pair/add-row-button"))
      to="footer"
    }}
  </div>
</fieldset>