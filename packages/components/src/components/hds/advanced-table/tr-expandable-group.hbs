{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
{{yield
  (hash
    data=@record
    isExpandable=this.hasChildren
    id=this.parentRowHeaderId
    depth=(if @depth @depth 1)
    onClickToggle=this.onClickToggle
    isExpanded=this.isExpanded
  )
}}
{{#if this.hasChildren }}
  <div class={{this.classes}}>
    {{#each this.children as |childRecord|}}
      <Hds::AdvancedTable::TrExpandableGroup @record={{childRecord}} @depth={{this.newDepth}} as |T|>
        {{yield (hash
          data=T.data
          isExpandable=T.isExpandable
          depth=T.depth
          onClickToggle=T.onClickToggle
          isExpanded=T.isExpanded
        )
      }}
      </Hds::AdvancedTable::TrExpandableGroup>
    {{/each}}
  </div>
{{/if}}