{{! @glint-nocheck: not typesafe yet }}
{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
<div class={{this.classNames}} ...attributes {{this.setupPrimitiveContainer}}>
  {{#let (element (if this.containsInteractive "div" "button")) as |Tag|}}
    <Tag
      class={{this.classNamesToggle}}
      aria-controls={{this.popoverId}}
      aria-describedby={{this.popoverId}}
      aria-details={{this.popoverId}}
      aria-expanded={{this.ariaExpanded}}
      {{this.setupPrimitiveToggle}}
    >
      {{yield (hash popoverElement=this.popoverElement isOpen=this.isOpen) to="toggle"}}
    </Tag>
  {{/let}}
  <div
    class="hds-popover-primitive__content"
    tabindex="-1"
    role="tooltip"
    aria-label="Tooltip content"
    aria-hidden={{if this.isOpen false true}}
    {{this.setupPrimitivePopover}}
  >
    {{#if @hasArrow}}
      <div class="hds-popover-primitive__arrow" {{this.setupPrimitiveArrow}} />
    {{/if}}
    {{#if this.isOpen}}
      {{yield (hash toggleElement=this.toggleElement isOpen=this.isOpen close=this.close) to="content"}}
    {{/if}}
  </div>
</div>