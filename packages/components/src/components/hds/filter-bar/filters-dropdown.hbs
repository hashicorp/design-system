{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}
<Hds::Dropdown
  @listPosition="bottom-left"
  @height="600px"
  @width="600px"
  class={{this.classNames}}
  @onClose={{this._onClose}}
  {{this._syncFilters @filters}}
  as |D|
>
  <D.ToggleButton
    @icon="filter"
    @text={{hds-t "hds.components.filter-bar.filters-dropdown.toggle-button" default="Add filter"}}
    @color="secondary"
    @size="small"
  />
  <D.Generic>
    <Hds::FilterBar::Tabs @ariaLabel="Filter bar tabs" as |T|>
      {{yield
        (hash
          FilterGroup=(component
            "hds/filter-bar/filter-group" tab=T.Tab panel=T.Panel onChange=this.onFilter filters=this.internalFilters
          )
          close=D.close
        )
      }}
    </Hds::FilterBar::Tabs>
  </D.Generic>
  <D.Footer @hasDivider={{true}}>
    <Hds::Layout::Flex @direction="row" @justify="space-between" @align="center" as |LF|>
      <Hds::ButtonSet>
        {{#unless this.isLiveFilter}}
          <Hds::Button
            @text={{hds-t "hds.components.filter-bar.filters-dropdown.apply" default="Apply filters"}}
            @size="small"
            {{on "click" (fn this.onApply D.close)}}
          />
        {{/unless}}
        <Hds::Button
          @text={{hds-t "hds.components.filter-bar.filters-dropdown.clear" default="Clear all filters"}}
          @color="secondary"
          @size="small"
          {{on "click" (fn this.onClear D.close)}}
        />
      </Hds::ButtonSet>
      <LF.Item>
        <Hds::Text::Body>{{hds-t
            "hds.components.filter-bar.filters-dropdown.selected-filters"
            default="Filters selected"
          }}:</Hds::Text::Body>
        <Hds::BadgeCount
          @text={{this.numFilters}}
          @type="outlined"
          @size="small"
          class="hds-filter-bar__filters-dropdown__filters-count"
        />
      </LF.Item>
    </Hds::Layout::Flex>
  </D.Footer>
</Hds::Dropdown>