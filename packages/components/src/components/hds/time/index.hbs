{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{! @glint-nocheck }}
{{! TODO: format-date & display have type errors, fix }}
{{#let this.display as |display|}}
  {{#if (and this.hasTooltip this.isValid)}}
    <Hds::TooltipButton
      class="hds-time-wrapper"
      @text={{if
        display.options.tooltipFormat
        (hds-format-date this.date display.options.tooltipFormat)
        this.isoUtcString
      }}
      @placement="bottom"
      @extraTippyOptions={{hash showOnCreate=this.isOpen}}
    >
      <Hds::Time::Inner
        @date={{this.date}}
        @isoUtcString={{this.isoUtcString}}
        @display={{this.display}}
        @register={{this.register}}
        @unregister={{this.unregister}}
        @isValid={{this.isValid}}
        ...attributes
      />
    </Hds::TooltipButton>
  {{else}}
    <Hds::Time::Inner
      @date={{this.date}}
      @isoUtcString={{this.isoUtcString}}
      @display={{this.display}}
      @register={{this.register}}
      @unregister={{this.unregister}}
      @isValid={{this.isValid}}
      ...attributes
    />
  {{/if}}
{{/let}}