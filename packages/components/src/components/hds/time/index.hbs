{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{#let this.display as |display|}}
  {{#if this.isValidDate}}
    {{#if this.hasTooltip}}
      <Hds::TooltipButton
        class="hds-time-wrapper"
        @text={{if
          display.options.tooltipFormat
          (hds-format-date this.date display.options.tooltipFormat)
          this.isoUtcString
        }}
        @placement="bottom"
        @extraTippyOptions={{hash showOnCreate=this.isOpen}}
      >
        <Hds::Time::Single
          @date={{this.date}}
          @isoUtcStringInner={{this.isoUtcString}}
          @displayInner={{this.display}}
          @register={{this.register}}
          @unregister={{this.unregister}}
          ...attributes
        />
      </Hds::TooltipButton>
    {{else}}
      <Hds::Time::Single
        @date={{this.date}}
        @isoUtcStringInner={{this.isoUtcString}}
        @displayInner={{this.display}}
        @register={{this.register}}
        @unregister={{this.unregister}}
        ...attributes
      />
    {{/if}}
  {{else if this.isValidDateRange}}
    {{#if this.hasTooltip}}
      <Hds::TooltipButton
        class="hds-time-wrapper"
        @text={{if
          display.options.tooltipFormat
          (concat
            (hds-format-date this.startDate display.options.tooltipFormat)
            (hds-format-date this.endDate display.options.tooltipFormat)
          )
          this.rangeIsoUtcString
        }}
        @placement="bottom"
        @extraTippyOptions={{hash showOnCreate=this.isOpen}}
      >
        <Hds::Time::Range @startDate={{this.startDate}} @endDate={{this.endDate}} ...attributes />
      </Hds::TooltipButton>
    {{else}}
      <Hds::Time::Range @startDate={{this.startDate}} @endDate={{this.endDate}} ...attributes />
    {{/if}}
  {{/if}}
{{/let}}