{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

<div class={{this.classNames}} ...attributes>
  <div class="hds-code-block__header">
    {{~yield (hash Title=(component "hds/code-block/title"))~}}
    {{~yield (hash Description=(component "hds/code-block/description"))~}}
  </div>
  <div class="hds-code-block__body">
    {{! content within pre tag is whitespace-sensitive; do not add new lines! }}
    <pre
      class="hds-code-block__code"
      {{style maxHeight=this.maxHeight}}
      data-line={{@highlightLines}}
      data-start={{@lineNumberStart}}
      id={{this._preCodeId}}
      tabindex="0"
    ><code {{did-insert this.setPrismCode}} {{did-update this.setPrismCode this.code @language}}>
        {{~this._prismCode~}}
      </code></pre>

    {{#if @hasCopyButton}}
      <Hds::CodeBlock::CopyButton
        @targetToCopy="#{{this._preCodeId}}"
        aria-describedby={{this._preCodeId}}
        @text={{this.copyButtonText}}
        @onCopy={{@onCopy}}
      />
    {{/if}}
  </div>
  {{#if this.showFooter}}
    <div class="hds-code-block__footer">
      <button type="button" class="hds-code-block__height-toggle-button" {{on "click" this.toggleExpanded}}>
        {{#if this._isExpanded}}
          <Hds::Icon @name="chevron-up" />
          Show less
        {{else}}
          <Hds::Icon @name="chevron-down" />
          Show more
        {{/if}}
      </button>
    </div>
  {{/if}}
</div>