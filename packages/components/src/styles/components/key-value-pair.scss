/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */

//
// KEY-VALUE-PAIR
//

@use "mixins/breakpoints" as *;

// notice: this is a <fieldset> element
.hds-key-value-pair {
  display: flex;
  flex-direction: column;
  margin: 0;
  padding: 0;
  border: none;
  row-gap: 16px;
}


.hds-key-value-pair__row {
  @include hds-breakpoint-below("sm") {
    display: flex;
    flex-direction: column;
    row-gap: 8px;
    align-items: flex-start;
  }

    display: grid;
flex-grow: 1;
grid-template-columns: repeat(var(--hds-key-value-pair-columns, 2), 1fr) min-content;
  // grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
  column-gap: 8px;

  &.hds-key-value-pair__row--first {
    .hds-key-value-pair__delete-row {
      grid-row: 2;
      grid-column: calc(var(--hds-key-value-pair-columns, 2) + 1);
    }
  }

  &.hds-key-value-pair__row--last {
    .hds-key-value-pair__add-row {
      grid-row: 2;
      grid-column: 1 / -1;
      justify-self: start; // align it to the left side of the row
    }
  }

  @include hds-breakpoint-above("sm") {
    &.hds-key-value-pair__row--first {
      grid-template-columns: repeat(var(--hds-key-value-pair-columns, 2), 1fr) min-content;
}
  }
}

.hds-key-value-pair__field-header {
  align-self: flex-end;
}

.hds-key-value-pair__footer {
  display: flex;
  flex-direction: row;
  column-gap: 16px;

  .hds-key-value-pair__add-row {
    flex-shrink: 0;
  }
}


.hds-key-value-pair__field {
  display: grid;
  grid-row: span 3;
  grid-template-rows: subgrid;
  justify-items: start;
  width: 100%; // we want the input element to fill the parent container

  .hds-key-value-pair__field-label {
    width: fit-content; // needed to avoid extra invisible space since the <label> is interactive
  }
 
  .hds-key-value-pair__field-header:not(.sr-only) {
    margin-bottom: 8px; // space between label and control
  }

  .hds-key-value-pair__field-helper-text {
    &:not(:first-child) {
      margin-top: 4px;
    }

    // special case: if there are multiple helper text lines, we want to reduce the spacing between them
    & + .hds-key-value-pair__field-helper-text {
      margin-top: 2px;
    }
  }

  .hds-key-value-pair__field-error {
    margin-top: 8px;
  }

  .hds-key-value-pair__field-control {
    display: flex; // to avoid extra whitespace when the content is an <input>, <select>, or <textarea> (inline elements)
    justify-self: stretch; // allows <input> and <textarea> to go full-width
  }
}
