{{! @glint-nocheck: not typesafe yet }}
{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "MenuPrimitive"}}

<Shw::Text::H1>MenuPrimitive</Shw::Text::H1>

<section data-test-percy>

  <Shw::Flex as |SF|>
    <SF.Label>With generic HTML <code>&lt;button&gt;</code> and generic content (placeholder)</SF.Label>
    <SF.Item @grow={{true}}>
      <div class="shw-utility-menu-primitive-container">
        <Hds::MenuPrimitive>
          <:toggle as |t|>
            <button type="button">
              Click me
              <FlightIcon @name={{if t.isOpen "chevron-up" "chevron-down"}} />
            </button>
          </:toggle>
          <:content>
            <Shw::Placeholder @text="some generic content here" @width="200" @height="90" @background="#e1f5fe" />
          </:content>
        </Hds::MenuPrimitive>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex as |SF|>
    <SF.Label>With generic HTML <code>&lt;button&gt;</code> and generic list of <code>&lt;a&gt;</code> links</SF.Label>
    <SF.Item @grow={{true}}>
      <div class="shw-utility-menu-primitive-container">
        <Hds::MenuPrimitive>
          <:toggle>
            <button type="button">Click me</button>
          </:toggle>
          <:content as |c|>
            <ul class="shw-utility-menu-primitive-content-list-of-links">
              <li>
                <a href="https://google.com">Link to Google</a>
              </li>
              <li>
                <button type="button" {{on "click" c.close}}>Button that closes the disclosed content on click</button>
              </li>
            </ul>
          </:content>
        </Hds::MenuPrimitive>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex as |SF|>
    <SF.Label>With generic HTML
      <code>&lt;button&gt;</code>
      and generic
      <code>&lt;input type="date"&gt;</code>
    </SF.Label>
    <SF.Item @grow={{true}}>
      <div class="shw-utility-menu-primitive-container">
        <Hds::MenuPrimitive>
          <:toggle>
            <button type="button">Click me</button>
          </:toggle>
          <:content>
            <ul class="shw-utility-menu-primitive-content-list-of-links">
              <li>
                <label for="date-input">Select date</label>
                <input id="date-input" type="date" />
              </li>
            </ul>
          </:content>
        </Hds::MenuPrimitive>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex as |SF|>
    <SF.Label>With <code>&lt;Hds::Button&gt;</code> and generic list of <code>&lt;a&gt;</code> links</SF.Label>
    <SF.Item @grow={{true}}>
      <div class="shw-utility-menu-primitive-container">
        <Hds::MenuPrimitive>
          <:toggle>
            <Hds::Button @icon="chevron-down" @iconPosition="trailing" @text="Click me" />
          </:toggle>
          <:content as |c|>
            <ul class="shw-utility-menu-primitive-content-list-of-links">
              <li>
                <a href="https://google.com">Link to Google</a>
              </li>
              <li>
                <button type="button" {{on "click" c.close}}>Button that closes the disclosed content on click</button>
              </li>
            </ul>
          </:content>
        </Hds::MenuPrimitive>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex as |SF|>
    <SF.Label>With
      <code>&lt;Hds::Button&gt;</code>
      inside a larger container and generic list of
      <code>&lt;a&gt;</code>
      links</SF.Label>
    <SF.Item @grow={{true}}>
      <div class="shw-utility-menu-primitive-container">
        <Hds::MenuPrimitive>
          <:toggle>
            <div class="shw-utility-menu-primitive-button-wrapper">
              <Hds::Button @icon="chevron-down" @iconPosition="trailing" @text="Click me" />
            </div>
          </:toggle>
          <:content as |c|>
            <ul class="shw-utility-menu-primitive-content-list-of-links">
              <li>
                <a href="https://google.com">Link to Google</a>
              </li>
              <li>
                <button type="button" {{on "click" c.close}}>Button that closes the disclosed content on click</button>
              </li>
            </ul>
          </:content>
        </Hds::MenuPrimitive>
      </div>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider />

  <Shw::Text::H2>Options</Shw::Text::H2>

  <Shw::Text::H3>Initial state (open/closed)</Shw::Text::H3>

  <Shw::Text::Body><em>Notice: the second
      <code>MenuPrimitive</code>
      instance is forcibly "open" on initial rendering (by setting
      <code>popover="manual"</code>
      on it). This means it can't be dismissided via the
      <code>Esc</code>
      key or by clicking outsite; it will revert back to the standard behaviour once you interact with it.</em>
  </Shw::Text::Body>

  <Shw::Grid {{style gap="2rem"}} @columns={{2}} as |SG|>
    {{#let (array false true) as |booleans|}}
      {{#each booleans as |bool|}}
        <SG.Item @label="With @isOpen={{if bool 'true' 'false (default)'}}">
          <div class="shw-utility-menu-primitive-container">
            <Hds::MenuPrimitive @isOpen={{bool}}>
              <:toggle as |t|>
                <button type="button">
                  Click me
                  <FlightIcon @name={{if t.isOpen "chevron-up" "chevron-down"}} />
                </button>
              </:toggle>
              <:content>
                <Shw::Placeholder @text="some generic content here" @width="200" @height="90" @background="#e1f5fe" />
              </:content>
            </Hds::MenuPrimitive>
          </div>
        </SG.Item>
      {{/each}}
    {{/let}}
  </Shw::Grid>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>Collision detection</Shw::Text::H3>

  <Shw::Text::Body><em>Notice: these
      <code>MenuPrimitive</code>
      instances are forcibly "open" on initial rendering (by setting
      <code>popover="manual"</code>
      on them). This means they can't be dismissided via the
      <code>Esc</code>
      key or by clicking outsite; they'll revert back to the standard behaviour once you interact with them.</em>
  </Shw::Text::Body>

  <Shw::Grid {{style gap="2rem"}} @columns={{2}} as |SG|>
    {{#let (array false true) as |booleans|}}
      {{#each booleans as |bool|}}
        <SG.Item @label="With @listEnableCollisionDetection={{if bool 'true' 'false (default)'}}">
          <div class="shw-utility-menu-primitive-container">
            <Hds::MenuPrimitive @isOpen={{true}} @popoverOptions={{(hash popoverEnableCollisionDetection=bool)}}>
              <:toggle as |t|>
                <button type="button">
                  Click me
                  <FlightIcon @name={{if t.isOpen "chevron-up" "chevron-down"}} />
                </button>
              </:toggle>
              <:content>
                <Shw::Placeholder @text="some generic content here" @width="200" @height="90" @background="#e1f5fe" />
              </:content>
            </Hds::MenuPrimitive>
          </div>
        </SG.Item>
      {{/each}}
    {{/let}}
  </Shw::Grid>

</section>