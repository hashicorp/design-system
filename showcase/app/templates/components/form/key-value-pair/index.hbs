{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "KeyValuePair Component"}}

<Shw::Text::H1>KeyValuePair</Shw::Text::H1>

<section data-test-percy>

  <Hds::Form::KeyValuePair @isOptional={{true}} @data={{this.sampleData}} @columns={{3}}>
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
      <H.HelperText>
        Use tags to correlate, organize or filter your resources using key-only or key/value pairs. You can add up to 3
        tags per resource.
      </H.HelperText>
      <H.Generic>
        <Shw::Placeholder @height="36px" @text="generic" />
      </H.Generic>
    </:header>

    <:row as |R|>
      <R.Field @isRequired={{true}} isInvalid={{R.rowData.error}} as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
      </R.Field>

      <R.Field @isOptional={{true}} as |F|>
        <F.Label>Value</F.Label>
        <F.Textarea @value={{R.rowData.value}} />
        {{#if R.rowData.error}}
          <F.Error>{{R.rowData.error}}</F.Error>
        {{/if}}
      </R.Field>
      <R.DeleteRowButton onClick={{this.onDeleteRowClick}} />
      <R.Generic>
        <Shw::Placeholder @height="36px" @text="generic" />
      </R.Generic>
    </:row>

    <:footer as |F|>
      <F.Generic>
        <Shw::Placeholder @height="36px" @text="generic" />
      </F.Generic>
      <F.AddRowButton />
      <F.Error>There is an error.</F.Error>
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Divider />

  <Shw::Text::H2>Not able to delete rows</Shw::Text::H2>

  <Shw::Text::H3>With empty <code>@data</code> argument</Shw::Text::H3>

  <Hds::Form::KeyValuePair @columns={{2}} @data={{this.emptyData}}>
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
    </:header>

    <:row as |R|>
      <R.Field as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
      </R.Field>

      <R.Field as |F|>
        <F.Label>Value</F.Label>
        <F.TextInput @value={{R.rowData.value}} />
      </R.Field>
      <R.DeleteRowButton />
    </:row>

    <:footer as |F|>
      <F.Generic>
        <Shw::Placeholder @height="36px" @text="generic" />
      </F.Generic>
      <F.AddRowButton />
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Text::H3>With 1 item in <code>@data</code> argument</Shw::Text::H3>

  <Hds::Form::KeyValuePair @columns={{2}} @data={{this.sampleDataWith1Row}}>
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
    </:header>

    <:row as |R|>
      <R.Field as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
      </R.Field>

      <R.Field as |F|>
        <F.Label>Value</F.Label>
        <F.TextInput @value={{R.rowData.value}} />
      </R.Field>
      <R.DeleteRowButton />
    </:row>

    <:footer as |F|>
      <F.Generic>
        <Shw::Placeholder @height="36px" @text="generic" />
      </F.Generic>
      <F.AddRowButton />
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Text::H2>Columns</Shw::Text::H2>

  <Shw::Text::H3>3 columns</Shw::Text::H3>

  <Hds::Form::KeyValuePair
    @isOptional={{true}}
    @data={{this.sampleData}}
    @onDeleteRowClick={{this.onDeleteRowClick}}
    @columns={{3}}
  >
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
      <H.HelperText>Use tags to correlate, organize or filter your resources using key-only or key/value pairs. You can
        add up to 3 tags per resource.</H.HelperText>
    </:header>

    <:row as |R|>
      <R.Field as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
      </R.Field>

      <R.Field as |F|>
        <F.Label>Value</F.Label>
        <F.TextInput @value={{R.rowData.value}} />
        {{#if R.rowData.error}}
          <F.Error>{{R.rowData.error}}</F.Error>
        {{/if}}
      </R.Field>
      <R.Field as |F|>
        <F.Generic>
          <Shw::Placeholder @height="36px" @text="generic" />
        </F.Generic>
      </R.Field>
      <R.DeleteRowButton />
    </:row>

    <:footer as |F|>
      <F.AddRowButton />
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Text::H3>2 columns</Shw::Text::H3>

  <Hds::Form::KeyValuePair
    @isOptional={{true}}
    @data={{this.sampleData}}
    @onDeleteRowClick={{this.onDeleteRowClick}}
    @columns={{2}}
  >
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
      <H.HelperText>Use tags to correlate, organize or filter your resources using key-only or key/value pairs. You can
        add up to 3 tags per resource.</H.HelperText>
    </:header>

    <:row as |R|>
      <R.Field as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
      </R.Field>

      <R.Field as |F|>
        <F.Label>Value</F.Label>
        <F.TextInput @value={{R.rowData.value}} />
        {{#if R.rowData.error}}
          <F.Error>{{R.rowData.error}}</F.Error>
        {{/if}}
      </R.Field>
      <R.DeleteRowButton />
    </:row>

    <:footer as |F|>
      <F.AddRowButton />
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Text::H3>1 column</Shw::Text::H3>

  <Hds::Form::KeyValuePair
    @isOptional={{true}}
    @data={{this.sampleData}}
    @onDeleteRowClick={{this.onDeleteRowClick}}
    @columns={{1}}
  >
    <:header as |H|>
      <H.Legend>Tags applied to this workspace</H.Legend>
      <H.HelperText>Use tags to correlate, organize or filter your resources using key-only or key/value pairs. You can
        add up to 3 tags per resource.</H.HelperText>
    </:header>

    <:row as |R|>
      <R.Field as |F|>
        <F.Label>Key</F.Label>
        <F.HelperText>The key you enter should be a good key.</F.HelperText>
        <F.TextInput @value={{R.rowData.key}} />
        {{#if R.rowData.error}}
          <F.Error>{{R.rowData.error}}</F.Error>
        {{/if}}
      </R.Field>
      <R.DeleteRowButton />
    </:row>

    <:footer as |F|>
      <F.AddRowButton />
    </:footer>
  </Hds::Form::KeyValuePair>

  <Shw::Divider />

  <Shw::Text::H2>Input types</Shw::Text::H2>

  <div class="hds-key-value-pair" {{style --hds-key-value-pair-columns="3"}}>
    {{! setting hds-key-value-pair__row--first class on all rows to force the labels and help text to be visible }}
    <div class="hds-key-value-pair__row hds-key-value-pair__row--first">
      <Hds::Form::KeyValuePair::Field as |F|>
        <F.Label>Text Input</F.Label>
        <F.HelperText>Sample text.</F.HelperText>
        <F.TextInput @value="Sample text" />
        <F.Error>Sample text.</F.Error>
      </Hds::Form::KeyValuePair::Field>
      <Hds::Form::KeyValuePair::Field as |F|>
        <F.Label>Textarea</F.Label>
        <F.HelperText>Sample text.</F.HelperText>
        <F.Textarea @value="Sample text" />
        <F.Error>Sample text.</F.Error>
      </Hds::Form::KeyValuePair::Field>
      <Hds::Form::KeyValuePair::Field as |F|>
        <F.Label>Masked Input</F.Label>
        <F.HelperText>Sample text.</F.HelperText>
        <F.MaskedInput @value="Sample text" />
        <F.Error>Sample text.</F.Error>
      </Hds::Form::KeyValuePair::Field>
    </div>
    <div class="hds-key-value-pair__row hds-key-value-pair__row--first">
      <Hds::Form::KeyValuePair::Field as |F|>
        <F.Label>Select</F.Label>
        <F.HelperText>Sample text.</F.HelperText>
        <F.Select>
          <option value="option1">Option 1</option>
          <option value="option2">Option 2</option>
          <option value="option3">Option 3</option>
        </F.Select>
        <F.Error>Sample text.</F.Error>
      </Hds::Form::KeyValuePair::Field>
    </div>
  </div>
</section>

<Shw::Divider />

<section>
  <Shw::Text::H2>Responsiveness</Shw::Text::H2>

  <Shw::Frame
    @id="demo-key-value-pair-large-viewports"
    @src="/components/form/key-value-pair/frameless/demo-responsiveness"
    @height="300"
    @label="Large viewport"
  />

  <Shw::Frame
    @id="demo-key-value-pair-small-viewports"
    @src="/components/form/key-value-pair/frameless/demo-responsiveness"
    @width="400"
    @height="650"
    @label="Small viewport (< 480px)"
  />
</section>